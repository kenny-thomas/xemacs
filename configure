#! /bin/sh

#### Configuration script for XEmacs.  Largely divergent from FSF.
#### Guess values for system-dependent variables and create Makefiles.
#### Generated automatically using autoconf version 2.12 
#### Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#### Copyright (C) 1993-1995 Board of Trustees, University of Illinois.
#### Copyright (C) 1996, 1997 Sun Microsystems, Inc.
#### Copyright (C) 1995, 1996 Ben Wing.

### Don't edit this script!
### This script was automatically generated by the `autoconf' program
### from the file `./configure.in'.
### To rebuild it, execute the command
###	autoconf
### in the this directory.  You must have autoconf version 2.12 or later.

### This file is part of XEmacs.

### XEmacs is free software; you can redistribute it and/or modify it
### under the terms of the GNU General Public License as published by
### the Free Software Foundation; either version 2, or (at your
### option) any later version.

### XEmacs is distributed in the hope that it will be useful, but
### WITHOUT ANY WARRANTY; without even the implied warranty of
### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
### General Public License for more details.

### You should have received a copy of the GNU General Public License
### along with XEmacs; see the file COPYING.  If not, write to the Free
### Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
### 02111-1307, USA.

### For usage, run `./configure --help'
### For more detailed information on building and installing XEmacs,
### read the file `INSTALL'.
###
### If configure succeeds, it leaves its status in config.status.
### A log of configuration tests can be found in config.log.
### If configure fails after disturbing the status quo,
### 	config.status is removed.

ac_help="$ac_help
  --with-x                use the X Window System"

build=NONE
cache_file=/dev/null
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${{exec_prefix}}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

subdirs=
MFLAGS= MAKEFLAGS=
ac_max_here_lines=12

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=src/lisp.h

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done


ac_ext=c
xe_cppflags='$c_switch_site  $c_switch_machine  $c_switch_system  $c_switch_x_site $X_CFLAGS $CPPFLAGS' # $c_switch_x_machine  $c_switch_x_system'
xe_ldflags='$ld_switch_site  $ld_switch_machine $ld_switch_system $ld_switch_x_site' # $ld_switch_x_machine $ld_switch_x_system'
xe_libs='$xe_check_libs $X_PRE_LIBS $libs_x $X_EXTRA_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c '"$CFLAGS $xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest '"$CFLAGS $xe_cppflags $LDFLAGS $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi


progname="`echo $0 | sed 's:^\./\./:\./:'`"


cache_file=/dev/null

MAKE_SUBDIR="src lib-src"

prefix='/usr/local'
exec_prefix='${prefix}'
bindir='${exec_prefix}/bin'
datadir='${prefix}/lib'
statedir='${prefix}/lib'
libdir='${exec_prefix}/lib'
mandir='${prefix}/man/man1'
infodir='${prefix}/lib/xemacs-${version}/info'
infodir_user_defined='no'
lispdir='${datadir}/xemacs-${version}/lisp'
lispdir_user_defined='no'
sitelispdir='${datadir}/xemacs/site-lisp'
etcdir='${datadir}/xemacs-${version}/etc'
etcdir_user_defined='no'
lockdir='${statedir}/xemacs/lock'
lockdir_user_defined='no'
archlibdir='${libdir}/xemacs-${version}/${configuration}'
archlibdir_user_defined='no'
with_menubars=''
with_scrollbars=''
with_dialogs=''
const_is_losing='yes'
puresize=''
cflags='NO_CFLAGS_DEFINED'
dynamic=''
with_x11=''
rel_alloc='default'
use_system_malloc='default'
energize_version=''
native_sound_lib=''
error_check_default='no'
error_check_extents=$error_check_default
error_check_typecheck=$error_check_default
error_check_bufpos=$error_check_default
error_check_gc=$error_check_default
error_check_malloc=$error_check_default
debug=$error_check_default
use_assertions='yes'
with_gif=''
with_toolbars=''
use_union_type='no'
with_dnet=''

test -n "$CPP" -a -d "$CPP" && CPP=

usage="Usage: $progname CONFIGURATION [-OPTION[=VALUE] ...]

Set compilation and installation parameters for XEmacs, and report.
CONFIGURATION specifies the machine and operating system to build for.

Note that for most of the following options, you can explicitly enable
them using \`--OPTION=yes' and explicitly disable them using \`--OPTION=no'.
This is especially useful for auto-detected options.

Options marked with a (*) are autodetected.


General options:

--help			Issue this usage message.
--verbose		Display the results of configure tests.
--extra-verbose		Display even more information, useful for debugging.


Compilation options:

--compiler=XXXX		Specify compiler.  Overrides environment variable CC.
--with-gcc (*)		Use GCC to compile XEmacs.
--with-gcc=no		Don't use GCC to compile XEmacs.
--with-gnu-make		Write the Makefiles to take advantage of
			special features of GNU Make. (GNU Make
			works fine on the Makefiles even without this
			option.  This just allows for simultaneous
			in-place and --srcdir building.)
--cflags=FLAGS		Compiler flags. Overrides environment variable CFLAGS.
--site-includes=DIR	Other header file directories.  Separate multiple
			dirs with spaces and use quotes to enclose.
--site-libraries=DIR	Other library directories.
--site-runtime-libraries=DIR
			Paths to add with -R flag.
--dynamic=yes		Link dynamically if supported by system.
--dynamic=no		Force static linking on systems where dynamic
			linking is the default.
--srcdir=DIR		Look for the XEmacs source files in DIR.
			See also --with-gnu-make.
--const-is-losing=no	Allow the use of const in the source code.


Installation options:

--prefix=DIR		Install files below DIR.  Defaults to \`$prefix'.


Window-system options:

--with-x (*)		Support the X Window System.
--with-x=no		Don't support X.
--x-includes=DIR 	Search for X header files in DIR.
--x-libraries=DIR	Search for X libraries in DIR.
--with-toolbars=no	Don't compile with any toolbar support.
--with-menubars=TYPE	Use TYPE menubars (lucid, motif, or no).  The Lucid
			widgets emulate Motif (mostly) but are faster.
			*WARNING*  The Motif menubar is currently broken.
--with-scrollbars=TYPE	Use TYPE scrollbars
			(lucid, motif, athena, athena3d, or no).
--with-dialogs=TYPE	Use TYPE dialog boxes (motif, athena, athena3d, or no).
			(Lucid menubars and scrollbars are the default.
			 Motif dialog boxes will be used if Motif can be
			 found.)
--with-cde (*)		Compile in support for CDE drag and drop.
--with-offix (*)	Compile in support for OffiX drag and drop.
--with-xmu=no (*)	For those unfortunates whose vendors don't ship Xmu.
--external-widget	Compile with external widget support.
--with-gif		Compile with support for GIF image conversion.
			This support is built-in and defaults to \`yes'.
--with-xpm (*)		Compile with support for XPM files.
			It is highly recommended that you obtain XPM
			(version 3.4h or better) if you don't already
			have it.  Get it from the XEmacs FTP site.
--with-xface (*)	Compile with support for X-Face mail header
	  		conversion.  Requires the compface library.
			Get it from the XEmacs FTP site.
--with-jpeg (*)		Compile with support for JPEG image conversion.
			Requires libjpeg from the Independent JPEG Group.
			Get it from the XEmacs FTP site.
--with-png (*)		Compile with support for PNG image conversion.
			Requires libpng.  Get it from the XEmacs FTP site.
--with-tiff		Compile with support for TIFF image conversion
			(not yet implemented).


TTY options:

--with-ncurses (*)	Use the ncurses library for tty support.
--with-gpm (*)		Compile in support for General Purpose Mouse.


Additional features:

--with-tooltalk (*)	Support the ToolTalk IPC protocol.
--with-workshop		Support the Sun WorkShop (formerly Sparcworks)
			development environment.
--with-energize		Support the Lucid Energize development environment.
			This doesn't currently work.
--with-socks		Compile with support for SOCKS (an Internet proxy).
--with-term		Compile with support for TERM (a way to multiplex
			serial lines and provide vaguely Internet-like
			functionality over a simple dialup connection,
			used on Linux and other systems.  NOTE: We can't
			guarantee that our TERM support coexists well
			with standard Internet connections).
--with-database=type (*) Compile with database support.  Valid types are
			\`no' or a comma-separated list of one or more
			of \`dbm', \`gnudbm', or \`berkdb'.
--with-sound=native (*)	Compile with native sound support.
--with-sound=nas	Compile with network sound support.
--with-sound=both	Compile with native and network sound support.
--native-sound-lib=LIB	Native sound support library.  Needed on Suns
			with --with-sound=both because both sound libraries
			are called libaudio.
--with-mocklisp		Compile with Mocklisp support.  Don't do this
			unless you have a Mocklisp program that you need
			to run.
--with-pop		support POP for mail retrieval
--with-kerberos		support Kerberos-authenticated POP
--with-hesiod		support Hesiod to get the POP server host
--with-dnet (*)		Compile with support for DECnet.
--mail-locking=TYPE (*)	Specify the locking to be used by movemail to prevent
			concurrent updates of mail spool files. Valid types
			are \`lockf', \`flock', and \`lock-file'.

Internationalization options:

--with-mule		Compile with Mule (MUlti-Lingual Emacs) support,
			needed to suport non-Latin-1 (including Asian) languages.
--with-xim=xlib		Compile with support for X input methods,
--with-xim=motif (*)	Used in conjunction with Mule support.
			Use either raw Xlib to provide XIM support, or
			the Motif XmIm* routines (when available).
			If the XmIm* routines are autodetected,
			then the default is --with-xim=motif, else --with-xim=no.
			NOTE:  On some systems like SunOS4 use of this option
			will cause XEmacs to crash at startup.
--with-canna (*)	Compile with support for Canna (a Japanese input method
			used in conjunction with Mule support).
--with-wnn (*)		Compile with support for WNN (a multi-language input method
			used in conjunction with Mule support).
			This is beta level code.
--with-wnn6 (*)		Compile with support for WNN version 6
			This is alpha level code.
--with-i18n3		Compile with I18N level 3 (support for message
			translation).  This doesn't currently work.


Debugging options:

--debug			Compile with support for debugging XEmacs.
			(Causes code-size increase and little loss of speed.)
--error-checking=TYPE[,TYPE]...
			Compile with internal error-checking added.
			Causes noticeable loss of speed.  Valid types
			are extents, bufpos, malloc, gc, typecheck.
--error-checking=none	Disable all internal error-checking (the default).
--error-checking=all	Enable all internal error-checking.
--memory-usage-stats 	Compile with additional code to allow you to
			determine what XEmacs's memory is being used
		        for.  Causes a small code increase but no loss
			of speed.  Normally enabled when --debug is given.
--no-doc-file		Don't rebuild the DOC file unless it's explicitly
			deleted.  Only use during development. (It speeds
			up the compile-run-test cycle.)
--use-union-type	Enable or disable use of a union, instead of an
			int, for the fundamental Lisp_Object type; this
			provides stricter type-checking.  Only works with
			some systems and compilers.


Other options:

--puresize=VALUE	Override default amount of space for pure Lisp code.
--rel-alloc		Use the relocating allocator (default for this option
  			is system-dependent).
--use-system-malloc	Force use of the system malloc, rather than GNU
			malloc.

You may also specify any of the \`path' variables found in
Makefile.in, including --bindir, --libdir, --lispdir, --datadir, and
so on.  Note that we recommend against explicitly setting any of these
variables.  See the INSTALL file for a complete list plus the reasons
we advise not changing them.

If successful, $progname leaves its status in config.status.  If
unsuccessful after disturbing the status quo, it removes config.status.

The configure build process also used the following environment variables:
CC        C compiler to use (but configure flags take precedence)
CFLAGS    C compiler compilation flags (such as -O)
CPPFLAGS  Additional compilation flags (sucha s -I) used only by the preprocessor
LDFLAGS   Additional linker flags

For more details on the install process, consult the INSTALL file.
"




arguments="$@"

quoted_sed_magic=s/"'"/"'"'"'"'"'"'"'"/g
quoted_arguments=
for i in "$@"; do
   case "$i" in
   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
   | --no-cr | --no-c) ;;
   -norecursion | --norecursion | --norecursio | --norecursi \
   | --norecurs | --norecur | --norecu | --norec | --nore | --nor) ;;
   *)
   quoted_i="`echo $i | sed $quoted_sed_magic`"
   quoted_arguments="$quoted_arguments '$quoted_i'" ;;
   esac
done

while test $# != 0; do
  arg="$1"; shift
  case "$arg" in

        -* )
            case "$arg" in
        -*=*)
	  opt=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*\([^=]*\)=.*$:\1:'`
	  val=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*[^=]*=\(.*\)$:\1:'`
	  valomitted=no
	;;
                                                                          -*)
                                 	  opt=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*\(.*\)$:\1:'`
          val="yes"
          valomitted=yes
        ;;
      esac

            optname="$opt"
      opt="`echo '' $opt | sed -e 's:^ ::' | tr - _`"

            case "$opt" in

      	run_in_place	| \
	with_x		| \
	with_x11	| \
	with_gcc	| \
	with_gnu_make	| \
	dynamic		| \
	with_ncurses	| \
	with_dnet	| \
	with_term	| \
	with_socks	| \
	with_cde	| \
	with_offix	| \
	with_gpm	| \
	with_gif	| \
	with_xpm	| \
	with_xface	| \
	with_jpeg	| \
	with_png	| \
	with_tiff	| \
	with_xmu	| \
	with_quantify	| \
	with_toolbars	| \
	with_tty	| \
	with_i18n3	| \
	with_mule	| \
	with_canna	| \
	with_wnn	| \
	with_wnn6	| \
	with_mocklisp	| \
	with_energize	| \
	with_workshop	| \
	with_sparcworks | \
	with_tooltalk   | \
	with_pop	| \
	with_kerberos	| \
	with_hesiod	| \
	with_dnet	| \
	external_widget | \
	verbose		| \
	extra_verbose	| \
	const_is_losing | \
	usage_tracking  | \
	use_union_type  | \
	debug		| \
	use_assertions	| \
	memory_usage_stats | \
	no_doc_file )
	  	  case "$val" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a boolean value: \`yes' or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\"" ;;


		srcdir		| \
	compiler	| \
	puresize	| \
	native_sound_lib | \
	x_includes	| \
	x_libraries	| \
	site_includes	| \
	site_libraries	| \
	site_runtime_libraries )
	  	  if test "$valomitted" = "yes" ; then
	    	    if test "$#" = 0 ; then
	      (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	    fi
	    val="$1"; shift
	  fi
          eval "$opt=\"$val\""
	;;

		rel_alloc | \
	use_system_malloc )
	  case "$val" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    d | de | def | defa | defau | defaul | default )
				val=default ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires one of these values:
  \`yes', \`no', or \`default'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

                "with_database" )
	  with_database_berkdb=no
	  with_database_dbm=no
	  with_database_gnudbm=no
	  for x in `echo "$val" | sed 's/,/ /'` ; do
	    case "$x" in
		no ) : ;;
		b | be | ber | berk | berkd | berkdb )  with_database_berkdb=yes ;;
		d | db | dbm )				with_database_dbm=yes    ;;
		g | gn | gnu | gnud | gnudb | gnudbm )  with_database_gnudbm=yes ;;
		* ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option value
  must be either \`no' or a comma-separated list
  of one or more of \`berkdb', \`dbm', or \`gnudbm'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
            esac
	  done
	  if test "$with_database_dbm"    = "yes" -a \
	          "$with_database_gnudbm" = "yes" ; then
	  (echo "$progname: Usage error:"
echo " " "Only one of \`dbm' and \`gnudbm' may be specified
  with the \`--$optname' option."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	  fi
        ;;

        	"with_sound" )
	  	  	  case "$val" in
	    y | ye | yes )			val=native ;;
	    n | no | non | none )		val=no;;
	    na | nat | nati | nativ | native )	val=native  ;;
	    ne | net | neta | netau | netaud | netaudi | netaudio | nas ) val=nas  ;;
	    b | bo | bot | both )		val=both;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`native', \`nas', \`both', or \`none'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"with_xim" )
	  case "$val" in
	    y | ye | yes )		  val=yes   ;;
	    n | no | non | none )	  val=no    ;;
	    x | xl | xli | xlib )	  val=xlib  ;;
	    m | mo | mot | moti | motif ) val=motif ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`motif', \`xlib', \`yes', or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"mail_locking" )
	  case "$val" in
	    lockf )	val=lockf ;;
	    flock )	val=flock ;;
	    file  )	val=file  ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`lockf', \`flock', or \`file'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"error_checking" )
	  	  	  
	  for x in `echo "$val" | sed 's/,/ /'` ; do
	    case "$x" in
	      	      n | no | non | none ) new_default=no ;;
	      a | al | all )	    new_default=yes ;;

	      extents )       error_check_extents=yes ;;
	      noextents )     error_check_extents=no ;;

	      typecheck )     error_check_typecheck=yes ;;
	      notypecheck )   error_check_typecheck=no ;;

	      bufpos )	      error_check_bufpos=yes ;;
	      nobufpos )      error_check_bufpos=no ;;

	      gc )	      error_check_gc=yes ;;
	      nogc )          error_check_gc=no ;;

	      malloc )	      error_check_malloc=yes ;;
	      nomalloc )      error_check_malloc=no ;;

	      * ) bogus_error_check=yes ;;
	    esac
	    if test "$bogus_error_check" -o \
	         \( -n "$new_default" -a -n "$echeck_notfirst" \) ; then
		if test $error_check_default = yes ; then
		  types="\`all' (default), \`none', \`noextents', \`notypecheck', \`nobufpos', \`nogc', and \`nomalloc'."
		else
		  types="\`all', \`none' (default), \`extents', \`typecheck', \`bufpos', \`gc', and \`malloc'."
		fi
		(echo "$progname: Usage error:"
echo " " "Valid types for the \`--$optname' option are:
  $types."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	    elif test "$new_default" ; then
		error_check_extents=$new_default
		error_check_typecheck=$new_default
		error_check_bufpos=$new_default
		error_check_gc=$new_default
		error_check_malloc=$new_default
		new_default=	# reset this
	    fi
	    echeck_notfirst=true
	  done
	;;

				
		prefix | exec_prefix | bindir | datadir | statedir | libdir | \
	mandir | infodir | lispdir | etcdir | lockdir | archlibdir | \
	sitelispdir | docdir )
	   	   if test "$valomitted" = "yes" ; then
	     if test "$#" = 0 ; then
		 (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	     fi
	     val="$1"; shift
	   fi
	   eval "$opt=\"$val\""

                                                       case "$opt" in
             lispdir ) lispdir_user_defined=yes ;;
             etcdir  )  etcdir_user_defined=yes ;;
             infodir ) infodir_user_defined=yes ;;
             datadir ) lispdir_user_defined=yes etcdir_user_defined=yes ;;
             statedir | lockdir ) lockdir_user_defined=yes ;;
             exec_prefix | libdir | archlibdir ) archlibdir_user_defined=yes ;;
           esac
	;;

		cflags )
	   	   if test "$valomitted" = "yes" ; then
	      if test "$#" = 0; then
                (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	      fi
	      val="$1"; shift
	   fi
	   eval "$opt=\"$val\""
	   eval "${opt}_specified=1"
	;;

		"no_create" ) ;;

		"usage" | "help" ) echo "$usage" | ${PAGER-more}; exit 0 ;;

			"with_menubars" | "with_scrollbars" | "with_dialogs" )
	  case "$val" in
	    l | lu | luc | luci | lucid )		val=lucid  ;;
	    m | mo | mot | moti | motif )		val=motif  ;;
	    athena3d | athena-3d )			val=athena3d ;;
	    a | at | ath | athe | athen | athena )	val=athena ;;
	    n | no | non | none )			val=no ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`lucid', \`motif', \`athena', \`athena3d', or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  eval "$opt=\"$val\""
	;;

        	* ) (echo "$progname: Usage error:"
echo " " "Unrecognized option: $arg"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;

      esac
    ;;

            *) configuration="$arg" ;;

  esac
done


eval set x "$quoted_arguments"; shift

if test "$with_energize" = "yes" ; then
  with_menubars=lucid with_scrollbars=motif with_dialogs=motif with_tooltalk=yes
  MAKE_SUBDIR="$MAKE_SUBDIR lwlib/energize"
fi

test "$extra_verbose" = "yes" && verbose=yes

test "$with_sparcworks" = "yes" && with_workshop=yes # compatibility alias
if test "$with_workshop" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SUNPRO
EOF
cat >> confdefs.h <<\EOF
#define SUNPRO 1
EOF
}

  extra_objs="$extra_objs sunpro.o"
  with_tooltalk=yes
fi

case "site_includes" in *:* ) site_includes="`echo $site_includes | sed 's/:/ /g'`";; esac
case "site_libraries" in *:* ) site_libraries="`echo $site_libraries | sed 's/:/ /g'`";; esac
case "site_runtime_libraries" in *:* ) site_runtime_libraries="`echo $site_runtime_libraries | sed 's/:/ /g'`";; esac

if test "$debug" = "yes"; then
  use_assertions=yes memory_usage_stats=yes
  extra_objs="$extra_objs debug.o"
fi

test -n "$with_x" && with_x11="$with_x"

if test "$run_in_place" = "yes"; then
  echo "configure: warning: "The --run-in-place option is ignored because it is unnecessary."" 1>&2
fi

if test "$configuration" = "" ; then
  echo '- You did not tell me what kind of host system you want to configure.
- I will attempt to guess the kind of system this is.' 1>&2
  guesssys=`echo $progname | sed 's/configure$/config.guess/'`
    if configuration=`${CONFIG_SHELL-/bin/sh} $guesssys | \
      sed 's/^\([^-][^-]*-[^-][^-]*-[^-][^-]*\)-.*$/\1/'` ; then
    echo "- Looks like this is a $configuration" 1>&2
  else
    (echo "$progname: Usage error:"
echo " " "Failed to guess the system type.  You need to tell me."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
  fi
fi

case "$srcdir" in

    "" )
    for dir in "`echo $0 | sed 's|//|/|' | sed 's|/[^/]*$||'`" "." ".." ; do
      if test -f "$dir/src/lisp.h" -a \
	      -f "$dir/lisp/version.el" ; then
        srcdir="$dir"
        break
      fi
    done
    if test -z "$srcdir" ; then
      (echo "$progname: Usage error:"
echo " " "Neither the current directory nor its parent seem to
  contain the XEmacs sources.  If you do not want to build XEmacs in its
  source tree, you should run \`$progname' in the directory in which
  you wish to build XEmacs, using the \`--srcdir' option to say where the
  sources may be found."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
  ;;

    * )
    if test ! -d "$srcdir" -o \
	    ! -f "$srcdir/src/lisp.h" -o \
	    ! -f "$srcdir/lisp/version.el" ; then
      (echo "$progname: Usage error:"
echo " " "The directory specified with the \`--srcdir' option,
  \`$srcdir', doesn't seem to contain the XEmacs sources.  You should
  either run the \`$progname' script at the top of the XEmacs source
  tree, or use the \`--srcdir' option to specify the XEmacs source directory."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
  ;;
esac

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:857: checking whether ln -s works" >&5

rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


for dir in lisp etc man info site-lisp
do
  if test ! -d "$dir" ; then
    echo Making symbolic link to "$srcdir/$dir"
    ${LN_S} "$srcdir/$dir" .
  fi
done

case "$srcdir" in
  /* ) ;;
  . )
            if test "$PWD" != "" -a "`(cd $PWD ; sh -c pwd)`" = "`pwd`"; then
      srcdir="$PWD"
    else
      srcdir="`(cd $srcdir && pwd)`"
    fi
  ;;
  *  ) srcdir="`(cd $srcdir && pwd)`" ;;
esac

if test `pwd` != `sh -c cd $srcdir && pwd`  \
   && test -f "$srcdir/src/config.h"; then
  (echo "$progname: WARNING: The directory tree \`$srcdir' is being used"
   echo "   as a build directory right now; it has been configured in its own"
   echo "   right.  To configure in another directory as well, you MUST"
   echo "   use GNU make.  If you do not have GNU make, then you must"
   echo "   now do \`make distclean' in $srcdir,"
   echo "   and then run $progname again.") >&2
  extrasub='/^VPATH[	 ]*=/c\
vpath %.c $(srcdir)\
vpath %.h $(srcdir)\
vpath %.y $(srcdir)\
vpath %.l $(srcdir)\
vpath %.s $(srcdir)\
vpath %.in $(srcdir)'
fi

for dir in ./src ./lib-src ./dynodump ./lwlib ./lock ; do
  test ! -d "$dir" && mkdir "$dir"
done
if test "$with_energize" = "yes" -a ! -d ./lwlib/energize; then
  mkdir ./lwlib/energize
fi


echo "checking "the configuration name"" 1>&6
echo "configure:921: checking "the configuration name"" >&5
internal_configuration=`echo $configuration | sed 's/-\(energize\|workshop\)//'`
if canonical=`$srcdir/config.sub "$internal_configuration"` ; then : ; else
  exit $?
fi





machine='' opsys='' need_dynodump=no

case "$canonical" in
  sparc-*-*        ) machine=sparc ;;
  alpha-*-*        ) machine=alpha ;;
  vax-*-*          ) machine=vax ;;
  mips-dec-*       ) machine=pmax ;;
  mips-sgi-*       ) machine=iris4d ;;
  romp-ibm-*       ) machine=ibmrt ;;
  rs6000-ibm-aix*  ) machine=ibmrs6000 ;;
  powerpc-ibm-aix* ) machine=ibmrs6000 ;;
  powerpc-*-*      ) machine=powerpc ;;
  hppa-*-*         ) machine=hp800 ;;
  m88k-dg-*        ) machine=aviion ;;
  m68*-sony-*      ) machine=news ;;
  mips-sony-*      ) machine=news-risc ;;
  clipper-*        ) machine=clipper ;;
esac

case "$canonical" in
  *-*-linux*    ) opsys=linux ;;
  *-*-netbsd*   ) opsys=netbsd ;;
  *-*-nextstep* ) opsys=nextstep ;;
  *-*-vms       ) opsys=vms ;;

    *-dec-osf1.3 | *-dec-osf2* ) opsys=decosf1-3 ;;
  *-dec-osf1.2 | *-dec-osf1* ) opsys=decosf1-2 ;;
  *-dec-osf3.[2-9]         ) opsys=decosf3-2 ;;
  *-dec-osf3*                ) opsys=decosf3-1 ;;
  *-dec-osf4*                ) opsys=decosf4-0 ;;

    *-*-ultrix[0-3].* | *-*-ultrix4.0* ) opsys=bsd4-2 ;;
  *-*-ultrix4.[12]* ) opsys=bsd4-3 ;;
  *-*-ultrix* )         opsys=ultrix4-3 ;;

    *-*-aix3.1*  ) opsys=aix3-1	;;
  *-*-aix3.2.5 ) opsys=aix3-2-5	;;
  *-*-aix3*    ) opsys=aix3-2	;;
  *-*-aix4.2*  ) opsys=aix4-2	;;
  *-*-aix4.1*  ) opsys=aix4-1	;;
  *-*-aix4*    ) opsys=aix4	;;

    *-gnu* )			opsys=gnu    ;;
  *-*-bsd4.[01] )		opsys=bsd4-1 ;;
  *-*-bsd4.2 )			opsys=bsd4-2 ;;
  *-*-bsd4.3 )			opsys=bsd4-3 ;;
  *-*-aos4.2 )			opsys=bsd4-2 ;;
  *-*-aos*   )			opsys=bsd4-3 ;;
  *-*-sysv0    | *-*-sysvr0 )	opsys=usg5-0 ;;
  *-*-sysv2    | *-*-sysvr2 )	opsys=usg5-2 ;;
  *-*-sysv2.2  | *-*-sysvr2.2 )	opsys=usg5-2-2 ;;
  *-*-sysv3*   | *-*-sysvr3* )	opsys=usg5-3 ;;
  *-*-sysv4.1* | *-*-sysvr4.1* )opsys=usg5-4 NON_GNU_CPP=/usr/lib/cpp ;;
  *-*-sysv4.[2-9]* | *-sysvr4.[2-9]* )
	if test -z "$NON_GNU_CPP" ; then
	  if test -f /usr/ccs/lib/cpp
	  then NON_GNU_CPP=/usr/ccs/lib/cpp
	  else NON_GNU_CPP=/lib/cpp
	  fi
	fi
	opsys=usg5-4-2 ;;
    *-sysv4* | *-sysvr4* )	opsys=usg5-4 ;;
    *-*-mach_bsd4.3* )          opsys=mach-bsd4-3 ;;
esac

case "$canonical" in

    *-*-netbsd* )
    case "$canonical" in
      i[3-9]86-*-netbsd*) machine=intel386 ;;
      hp300-*-netbsd* | amiga-*-netbsd* | sun3-*-netbsd* | mac68k-*-netbsd* | da30-*-netbsd* | m68k-*-netbsd* )
                                            machine=hp9000s300 ;;
      pc532-*-netbsd* | ns32k-*-netbsd* )  machine=ns32000 ;;
      pmax-*-netbsd*  | mips-*-netbsd*  )  machine=pmax ;;
    esac
  ;;

    arm-acorn-riscix1.1* ) machine=acorn opsys=riscix1-1 ;;
  arm-acorn-riscix1.2* | arm-acorn-riscix ) machine=acorn opsys=riscix1-2 ;;

    fx80-alliant-* ) machine=alliant4     opsys=bsd4-2 ;;
  i860-alliant-* ) machine=alliant-2800 opsys=bsd4-3 ;;

    m68*-altos-sysv* ) machine=altos opsys=usg5-2 ;;

    580-amdahl-sysv* ) machine=amdahl opsys=usg5-2-2 ;;

    m68*-apollo-* ) machine=apollo opsys=bsd4-3 ;;

    we32k-att-sysv* ) machine=att3b opsys=usg5-2-2 ;;

    m68*-att-sysv* ) machine=7300 opsys=usg5-2-2 ;;

    rs6000-bull-bosx* ) machine=ibmrs6000 opsys=aix3-2 ;; # dpx20
  m68*-bull-sysv3*  ) machine=dpx2      opsys=usg5-3 ;; # dpx2
  m68*-bull-sysv2*  ) machine=sps7      opsys=usg5-2 ;; # sps7

  
    celerity-celerity-bsd* ) machine=celerity opsys=bsd4-2 ;;

    *-convex-bsd* | *-convex-convexos* )
    machine=convex opsys=bsd4-3
    NON_GNU_CPP="cc -E -P"
  ;;

    i[3-9]86-cubix-sysv* ) machine=intel386 opsys=usg5-3 ;;

    cydra*-cydrome-sysv* ) machine=cydra5 opsys=usg5-3 ;;

    i586-dg-dgux*R4*   | i586-dg-dgux5.4.4* ) machine=aviion opsys=dgux5-4r4 ;;
  m88k-dg-dgux5.4R3* | m88k-dg-dgux5.4.3* ) opsys=dgux5-4r3 ;;
  m88k-dg-dgux5.4R2* | m88k-dg-dgux5.4.2* ) opsys=dgux5-4r2 ;;
  m88k-dg-dgux* 			  ) opsys=dgux	   ;;

    m68k-motorola-sysv* | m68000-motorola-sysv* ) machine=delta opsys=usg5-3 ;;
  m88k-motorola-sysv4* )
                    machine=delta88k opsys=usg5-4-2
  ;;
  m88k-motorola-sysv* | m88k-motorola-m88kbcs* ) machine=delta88k opsys=usg5-3 ;;

    m68*-dual-sysv*    ) machine=dual opsys=usg5-2   ;;
  m68*-dual-uniplus* ) machine=dual opsys=unipl5-2 ;;

    elxsi-elxsi-sysv* ) machine=elxsi opsys=usg5-2 ;;

    ns16k-encore-bsd* ) machine=ns16000 opsys=umax ;;

    pn-gould-bsd4.2* ) machine=gould     opsys=bsd4-2 ;;
  pn-gould-bsd4.3* ) machine=gould     opsys=bsd4-3 ;;
  np1-gould-bsd* )   machine=gould-np1 opsys=bsd4-3 ;;

      m88k-harris-cxux* )
        case "`uname -r`" in
       [56].[0-9] ) machine=nh4000 opsys=cxux  ;;
       [7].[0-9]  ) machine=nh4000 opsys=cxux7 ;;
    esac
    NON_GNU_CPP="/lib/cpp"
  ;;
    m68k-harris-cxux* ) machine=nh3000 opsys=cxux ;;
    powerpc-harris-powerunix ) machine=nh6000 opsys=powerunix NON_GNU_CPP="cc -Xo -E -P" ;;

    xps*-honeywell-sysv* ) machine=xps100 opsys=usg5-2 ;;

    m68*-hp-bsd* ) machine=hp9000s300 opsys=bsd4-3 ;;

    *-hp-hpux* )
        case "$canonical" in
      m68*  ) machine=hp9000s300 ;;
      hppa* ) machine=hp800      ;;
    esac

    case "$canonical" in
      *-hp-hpux7*  )  opsys=hpux   ;;
      *-hp-hpux8*  )  opsys=hpux8  ;;
      *-hp-hpux9*  )  opsys=hpux9  ;;
      *-hp-hpux10* )  opsys=hpux10 ;;
      * )
        case "`uname -r`" in
	  *.B8.* )  opsys=hpux8  ;;
	  *.08.* )  opsys=hpux8  ;;
	  *.09.* )  opsys=hpux9  ;;
	  *.10.* )  opsys=hpux10 ;;
	  *      )  opsys=hpux   ;;
        esac
      ;;
    esac

        case "$opsys" in hpux9 | hpux10 ) extra_objs="$extra_objs strcat.o";; esac

    if test "$opsys" = "hpux10"; then ansi_flag="-Ae"; else ansi_flag="-Aa"; fi
    NON_GNU_CC="cc $ansi_flag" NON_GNU_CPP="cc $ansi_flag -E"

    case "$canonical" in *-hp-hpux*shr* ) opsys="${opsys}-shr" ;; esac
  ;;

    orion-orion-bsd*   ) machine=orion    opsys=bsd4-2 ;;
  clipper-orion-bsd* ) machine=orion105 opsys=bsd4-2 ;;

    i[3-9]86-ibm-aix1.1* ) machine=ibmps2-aix opsys=usg5-2-2 ;;
  i[3-9]86-ibm-aix1.[23]* | i[3-9]86-ibm-aix* ) machine=ibmps2-aix opsys=usg5-3 ;;
  i370-ibm-aix*) machine=ibm370aix opsys=usg5-3 ;;
  romp-ibm-aos*    ) opsys=bsd4-3 ;;
  romp-ibm-bsd*    ) opsys=bsd4-3 ;;
  romp-ibm-mach*   ) opsys=mach-bsd4-3 ;;

    m68*-isi-bsd4.2* ) machine=isi-ov opsys=bsd4-2 ;;
  m68*-isi-bsd4.3* ) machine=isi-ov opsys=bsd4-3 ;;

    i[3-9]86-intsys-sysv* ) machine=is386 opsys=usg5-2-2 ;;

    i[3-9]86-prime-sysv* ) machine=i386 opsys=usg5-3 ;;

    i[3-9]86-sequent-bsd* ) machine=symmetry opsys=bsd4-3 ;;

    i[3-9]86-sequent-ptx* ) machine=sequent-ptx opsys=ptx NON_GNU_CPP="/lib/cpp" ;;

      i[3-9]86-ncr-sysv* ) machine=ncr386 opsys=usg5-4-2 ;;

    i860-intel-osf1* ) machine=paragon opsys=osf1 NON_GNU_CPP=/usr/mach/lib/cpp ;;

    i860-*-sysv4* ) machine=i860 opsys=usg5-4 NON_GNU_CC="/bin/cc" NON_GNU_CPP="/usr/ccs/lib/cpp" ;;

    m68*-masscomp-rtu* ) machine=masscomp opsys=rtu ;;

    m68*-megatest-bsd* ) machine=mega68 opsys=bsd4-2 ;;

        mips-mips-usg* ) machine=mips4 ;;
  mips-mips-riscos4 )
    machine=mips4
    NON_GNU_CC="cc -systype bsd43"
    NON_GNU_CPP="cc -systype bsd43 -E"
    case "$canonical" in
      mips-mips-riscos4* ) opsys=bsd4-3  ;;
      mips-mips-riscos5* ) opsys=riscos5 ;;
    esac
  ;;
  mips-mips-bsd* ) machine=mips opsys=bsd4-3 ;;
  mips-mips-*    ) machine=mips opsys=usg5-2-2 ;;

    m68*-next-* | m68k-*-nextstep* ) machine=m68k opsys=nextstep ;;

    ns32k-ns-genix* ) machine=ns32000 opsys=usg5-2 ;;

    m68*-ncr-sysv2* | m68*-ncr-sysvr2* ) machine=tower32   opsys=usg5-2-2 ;;
  m68*-ncr-sysv3* | m68*-ncr-sysvr3* ) machine=tower32v3 opsys=usg5-3 ;;

    m68*-nixdorf-sysv* ) machine=targon31 opsys=usg5-2-2 ;;

    m68*-nu-sysv* ) machine=nu opsys=usg5-2 ;;

    m68*-plexus-sysv* ) machine=plexus opsys=usg5-2 ;;

    pyramid-pyramid-bsd* ) machine=pyramid opsys=bsd4-2 ;;

    ns32k-sequent-bsd4.2* ) machine=sequent opsys=bsd4-2 ;;
  ns32k-sequent-bsd4.3* ) machine=sequent opsys=bsd4-3 ;;

    mips-siemens-sysv* | mips-sni-sysv*)
    machine=mips-siemens opsys=usg5-4
    NON_GNU_CC=/usr/ccs/bin/cc
    NON_GNU_CPP=/usr/ccs/lib/cpp
  ;;

      m68*-sgi-iris3.5* ) machine=irist opsys=iris3-5 ;;
  m68*-sgi-iris3.6* | m68*-sgi-iris*) machine=irist opsys=iris3-6 ;;
    mips-sgi-irix3.*    ) opsys=irix3-3 ;;
  mips-sgi-irix4.*    ) opsys=irix4-0 ;;
  mips-sgi-irix6*     ) opsys=irix6-0 NON_GNU_CC="cc -Olimit 2000" ;;
  mips-sgi-irix5.1*   ) opsys=irix5-1 ;;
  mips-sgi-irix5.2*   ) opsys=irix5-2 ;;
  mips-sgi-irix5.*    ) opsys=irix5-3 ;;
  mips-sgi-irix*      ) opsys=irix5-0 ;;

    *-sony-newsos[34]* | *-sony-news[34]* ) opsys=bsd4-3 ;;
  *-sony-news* ) opsys=newsos5 ;;

    m68*-stride-sysv* ) machine=stride opsys=usg5-2 ;;

    *-*-solaris* | *-*-sunos* | *-sun-mach* | *-sun-bsd* )
        case "$canonical" in
      m68*-sunos1* )	         machine=sun1     ;;
      m68*-sunos2* )	         machine=sun2     ;;
      m68* )		         machine=sun3     ;;
      i[3-9]86*-sun-sunos[34]* ) machine=sun386 ;;
      i[3-9]86-*-* )	         machine=intel386 ;;
      rs6000* )                  machine=rs6000   ;;
    esac

        case "$canonical" in *-sunos5*)
      canonical="`echo \"$canonical\" | sed -e s/sunos5/solaris2/`";;
    esac

                    case "$canonical" in
      *-sunos4* )
        test -f /usr/lib/cpp     && NON_GNU_CPP=/usr/lib/cpp ;;
      *-solaris2* )
        test -f /usr/ccs/lib/cpp && NON_GNU_CPP=/usr/ccs/lib/cpp
        RANLIB=':'
	case "$canonical" in *-solaris2.[0-5]* ) need_dynodump=yes ;; esac
	esac

    case "$canonical" in
            i[3-9]86-*-sunos4*) opsys=sunos4-0	;;
      *-sunos4.0*	  ) opsys=sunos4-0	;;
      *-sunos4.1.2*	  ) opsys=sunos4-1-2	;;
      *-sunos4.1.3*	  ) opsys=sunos4-1-3	;;
      *-sunos4.1.[4-9]* ) opsys=sunos4-1-4	;;
      *-sunos4* | *-sunos ) opsys=sunos4-1	;;

      *-solaris2.3*	  ) opsys=sol2-3	;;
      *-solaris2.4*	  ) opsys=sol2-4	;;
      *-solaris2.5*	  ) opsys=sol2-5	;;
      *-solaris2.[6-9]* ) opsys=sol2-6	;;
      *-solaris*	  ) opsys=sol2		;;

      *-mach*		  ) opsys=mach-bsd4-3	;;
      *			  ) opsys=bsd4-2	;;
    esac

    case "$canonical" in *-sunos4*shr* ) opsys="${opsys}-shr" ;; esac

        case "$canonical" in
      *-solaris* ) case "$CC" in /usr/ucb/cc* ) CC="" ;; esac ;;
    esac
  ;;

    m68*-tadpole-sysv* ) machine=tad68k opsys=usg5-3 ;;

    tahoe-tahoe-bsd4.2* ) machine=tahoe opsys=bsd4-2 ;;
  tahoe-tahoe-bsd4.3* ) machine=tahoe opsys=bsd4-3 ;;

    mips-tandem-sysv* ) machine=tandem-s2 opsys=usg5-3 ;;

    m88k-tektronix-sysv3* ) machine=tekxd88 opsys=usg5-3 ;;

    ns16k-tektronix-bsd* ) machine=ns16000 opsys=bsd4-2 ;;
      m68*-tektronix-bsd* ) machine=tek4300 opsys=bsd4-3 ;;

    titan-titan-sysv* ) machine=titan opsys=usg5-3 ;;

    m68*-unisys-uniplus* ) machine=ustation opsystem=unipl5-2 ;;

    vax-dec-* )
    case "$canonical" in
      *-sysv[01]* | *-sysvr[01]* ) 	opsys=usg5-0 ;;
      *-sysv2* | *-sysvr2* )		opsys=usg5-2 ;;
      *-mach* )				opsys=mach-bsd4-3 ;;
    esac
  ;;

    ns16k-whitechapel-* ) machine=mg1 ;;

    m68*-wicat-sysv* ) machine=wicat opsys=usg5-2 ;;

    i[3-9]86-*-* )
    machine=intel386
    case "$canonical" in
      *-isc1.* | *-isc2.[01]* ) opsys=386-ix ;;
      *-isc2.2* )		opsys=isc2-2 ;;
      *-isc4.0* )		opsys=isc4-0 ;;
      *-isc4.* )		opsys=isc4-1
				GCC_TEST_OPTIONS=-posix
				NON_GCC_TEST_OPTIONS=-Xp
				;;
      *-isc* )			opsys=isc3-0 ;;
      *-esix5* )		opsys=esix5r4 NON_GNU_CPP=/usr/lib/cpp ;;
      *-esix* )			opsys=esix ;;
      *-mach* )			opsys=mach-bsd4-3 ;;
      *-xenix* )		opsys=xenix ;;
      *-sco3.2v4* )		opsys=sco4 NON_GNU_CPP=/lib/cpp  ;;
      *-bsd386* | *-bsdi1* )	opsys=bsd386 ;;
      *-bsdi3* )		opsys=bsdos3 ;;
      *-bsdi2.1* )		opsys=bsdos2-1 ;;
      *-bsdi2* )		opsys=bsdos2 ;;
      *-sco3.2v5* )		opsys=sco5 ;
							if test "$dynamic" = "yes" ; then
		NON_GNU_CPP="/lib/cpp -D_XOPEN_SOURCE -D_SCO_ELF"  ;
	else
		NON_GNU_CPP="/lib/cpp -D_XOPEN_SOURCE"  ;
	fi ;;
      *-386bsd* )	        opsys=386bsd ;;
      *-freebsd* )		opsys=freebsd ;;
      *-nextstep* )		opsys=nextstep ;;
          esac
  ;;

    m68k-*-linux* ) machine=m68k opsys=linux ;;

esac

if test -z "$machine" -o -z "$opsys"; then
  (echo "$progname: XEmacs hasn't been ported to \`$canonical' systems."
   echo "$progname: Check \`etc/MACHINES' for recognized configuration names."
  ) >&2
  exit 1
fi

if test "$dynamic" = "yes" ; then
  case "$opsys" in
    hpux* | sunos4* | sco5 ) opsys="${opsys}-shr" ;;
  esac
elif test "$dynamic" = "no" ; then
  case "$opsys" in
    sol2* | decosf1-3 | decosf3-* | decosf4-* | linux ) opsys="${opsys}-static" ;;
  esac
fi

machfile="m/${machine}.h"
opsysfile="s/${opsys}.h"


test -n "$CC" && cc_specified=yes

SPECIFIED_CFLAGS="$CFLAGS"

if test -n "$compiler"; then CC="$compiler"; fi

test -n "$NON_GNU_CC"  -a "$with_gcc" = "no" -a -z "$CC"  && CC="$NON_GNU_CC"
# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1332: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1358: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1403: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$c_switch_site  $c_switch_machine  $c_switch_system  $c_switch_x_site $X_CFLAGS $CPPFLAGS' # $c_switch_x_machine  $c_switch_x_system'
xe_ldflags='$ld_switch_site  $ld_switch_machine $ld_switch_system $ld_switch_x_site' # $ld_switch_x_machine $ld_switch_x_system'
xe_libs='$xe_check_libs $X_PRE_LIBS $libs_x $X_EXTRA_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c '"$CFLAGS $xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest '"$CFLAGS $xe_cppflags $LDFLAGS $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext <<EOF
#line 1415 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
if { (eval echo configure:1419: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1439: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1444: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1451: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  ac_test_CFLAGS="${CFLAGS+set}"
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1465: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-O2"
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi


if   test "$with_gcc" = "no"  -a "$ac_cv_prog_gcc" = "yes"; then 
  CC=${NON_GNU_CC-cc}
  # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1495: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1521: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1566: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$c_switch_site  $c_switch_machine  $c_switch_system  $c_switch_x_site $X_CFLAGS $CPPFLAGS' # $c_switch_x_machine  $c_switch_x_system'
xe_ldflags='$ld_switch_site  $ld_switch_machine $ld_switch_system $ld_switch_x_site' # $ld_switch_x_machine $ld_switch_x_system'
xe_libs='$xe_check_libs $X_PRE_LIBS $libs_x $X_EXTRA_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c '"$CFLAGS $xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest '"$CFLAGS $xe_cppflags $LDFLAGS $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext <<EOF
#line 1578 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
if { (eval echo configure:1582: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1602: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1607: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1614: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  ac_test_CFLAGS="${CFLAGS+set}"
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1628: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-O2"
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi

elif test "$with_gcc" = "yes" -a "$ac_cv_prog_gcc" = "no" ; then 
  CC=gcc
  # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1657: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1683: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1728: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$c_switch_site  $c_switch_machine  $c_switch_system  $c_switch_x_site $X_CFLAGS $CPPFLAGS' # $c_switch_x_machine  $c_switch_x_system'
xe_ldflags='$ld_switch_site  $ld_switch_machine $ld_switch_system $ld_switch_x_site' # $ld_switch_x_machine $ld_switch_x_system'
xe_libs='$xe_check_libs $X_PRE_LIBS $libs_x $X_EXTRA_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c '"$CFLAGS $xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest '"$CFLAGS $xe_cppflags $LDFLAGS $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext <<EOF
#line 1740 "configure"
#include "confdefs.h"
main(){return(0);}
EOF
if { (eval echo configure:1744: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1764: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1769: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1776: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  ac_test_CFLAGS="${CFLAGS+set}"
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1790: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
  if test "$ac_test_CFLAGS" = set; then
    CFLAGS="$ac_save_CFLAGS"
  elif test $ac_cv_prog_cc_g = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-O2"
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi

fi

if test "$GCC" = "yes"; then with_gcc=yes; else with_gcc=no; fi
test -n "$NON_GNU_CPP" -a "$with_gcc" = "no" -a -z "$CPP" && CPP="$NON_GNU_CPP"

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:1820: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then

  # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 1833 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1839: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 1850 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1856: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6


case "$canonical" in
  *-sun-sunos* ) test "$CPP" = "acc -E"  &&  CPP="acc -E -Xs" ;;
esac


echo "Extracting information from the machine- and system-dependent headers..."



tempcname="conftest.c"






echo '
#define NOT_C_CODE
#define C_SWITCH_SITE
#define C_SWITCH_X_SITE
#define LD_SWITCH_SITE
#define LD_SWITCH_X_SITE
#define LD_SWITCH_X_SITE_AUX
#include "'$srcdir'/src/'$opsysfile'"
#include "'$srcdir'/src/'$machfile'"

#ifndef LIBS_MACHINE
#define LIBS_MACHINE 
#endif
configure___ libs_machine=LIBS_MACHINE

#ifndef LIBS_SYSTEM
#define LIBS_SYSTEM 
#endif
configure___ libs_system=LIBS_SYSTEM

#ifndef LIBS_TERMCAP
#define LIBS_TERMCAP 
#endif
configure___ libs_termcap=LIBS_TERMCAP

#ifndef LIB_STANDARD
#define LIB_STANDARD 
#endif
configure___ libs_standard=LIB_STANDARD

#ifndef C_SWITCH_SYSTEM
#define C_SWITCH_SYSTEM 
#endif
configure___ c_switch_system=C_SWITCH_SYSTEM

#ifndef C_SWITCH_MACHINE
#define C_SWITCH_MACHINE 
#endif
configure___ c_switch_machine=C_SWITCH_MACHINE

#ifndef C_SWITCH_X_SYSTEM
#define C_SWITCH_X_SYSTEM 
#endif
configure___ c_switch_x_system=C_SWITCH_X_SYSTEM

#ifndef LD_SWITCH_X_SYSTEM
#define LD_SWITCH_X_SYSTEM 
#endif
configure___ ld_switch_x_system=LD_SWITCH_X_SYSTEM

#ifndef LD_SWITCH_SYSTEM
#define LD_SWITCH_SYSTEM 
#endif
configure___ ld_switch_system=LD_SWITCH_SYSTEM

#ifndef UNEXEC
#define UNEXEC unexec.o
#endif
configure___ unexec=UNEXEC

#ifndef C_DEBUG_SWITCH
#define C_DEBUG_SWITCH -g
#endif
configure___ c_debug_switch=C_DEBUG_SWITCH

#ifndef C_OPTIMIZE_SWITCH
#define C_OPTIMIZE_SWITCH -O
#endif
configure___ c_optimize_switch=C_OPTIMIZE_SWITCH


#ifdef SYSTEM_MALLOC
configure___ system_malloc=yes
#else
configure___ system_malloc=no
#endif

#ifdef TERMINFO
configure___ have_terminfo=yes
#else
configure___ have_terminfo=no
#endif

#ifdef MAIL_USE_FLOCK
configure___ mail_use_flock=yes
#else
configure___ mail_use_flock=no
#endif

#ifdef MAIL_USE_LOCKF
configure___ mail_use_lockf=yes
#else
configure___ mail_use_lockf=no
#endif

#ifdef __SUNPRO_C
configure___ sunpro_c=yes
#else
configure___ sunpro_c=no
#endif


#ifdef THIS_IS_CONFIGURE

/* Get the CFLAGS for tests in configure.  */
#ifdef __GNUC__
configure___ CFLAGS=C_DEBUG_SWITCH C_OPTIMIZE_SWITCH '$SPECIFIED_CFLAGS'
#else
configure___ CFLAGS=C_DEBUG_SWITCH '$SPECIFIED_CFLAGS'
#endif

#else /* not THIS_IS_CONFIGURE */

/* Get the CFLAGS for real compilation.  */
#ifdef __GNUC__
configure___ REAL_CFLAGS=C_DEBUG_SWITCH C_OPTIMIZE_SWITCH '$SPECIFIED_CFLAGS'
#else
configure___ REAL_CFLAGS=C_DEBUG_SWITCH '$SPECIFIED_CFLAGS'
#endif

#endif /* not THIS_IS_CONFIGURE */
' > $tempcname
CPP=`eval "echo $CPP"`
eval `$CPP -Isrc $tempcname \
       | grep 'configure___' \
       | sed -n -e 's/^configure___ \([^=]*=\)\(.*\)$/\1"\2"/p'`
if test -z "$SPECIFIED_CFLAGS"; then
  eval `$CPP -Isrc -DTHIS_IS_CONFIGURE $tempcname \
	 | grep 'configure___' \
	 | sed -n -e 's/^configure___ \([^=]*=\)\(.*\)$/\1"\2"/p'`
else
  REAL_CFLAGS="$CFLAGS"
fi
rm $tempcname

if test "$cflags" != "NO_CFLAGS_DEFINED" ; then
  REAL_CFLAGS=$cflags
fi

UNEXEC_SRC="`echo $unexec | sed 's/\.o/.c/'`"

GNU_MALLOC=yes
if test "$system_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
  (The GNU allocators don't work with this system configuration.)"
elif test "$use_system_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
  (User chose not to use GNU allocators.)"
fi



# Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2051: checking for $ac_word" >&5

if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.

# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
echo "configure:2104: checking for a BSD compatible install" >&5
if test -z "$INSTALL"; then

  IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      for ac_prog in ginstall installbsd scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    # OSF/1 installbsd also uses dspmsg, but is usable.
	    :
	  else
	    ac_cv_path_install="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_IFS"

  if test "${ac_cv_path_install+set}" = set; then
    INSTALL="$ac_cv_path_install"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2155: checking for $ac_word" >&5

if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"


echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:2183: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 2185 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _ALL_SOURCE
EOF
cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF
}

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*



for ac_hdr in mach/mach.h sys/stropts.h sys/timeb.h sys/time.h unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:2215: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 2218 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2223: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_hdr in utime.h sys/wait.h libintl.h locale.h libgen.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:2256: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 2259 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2264: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_hdr in linux/version.h kstat.h sys/pstat.h inttypes.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:2297: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 2300 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2305: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:2335: checking for ANSI C header files" >&5

cat > conftest.$ac_ext <<EOF
#line 2338 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2346: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 2363 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 2381 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
cat > conftest.$ac_ext <<EOF
#line 2399 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:2410: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining STDC_HEADERS
EOF
cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF
}

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:2435: checking whether time.h and sys/time.h may both be included" >&5

cat > conftest.$ac_ext <<EOF
#line 2438 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:2447: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TIME_WITH_SYS_TIME
EOF
cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF
}

fi

echo $ac_n "checking for sys_siglist declaration in signal.h or unistd.h""... $ac_c" 1>&6
echo "configure:2471: checking for sys_siglist declaration in signal.h or unistd.h" >&5

cat > conftest.$ac_ext <<EOF
#line 2474 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
/* NetBSD declares sys_siglist in unistd.h.  */
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
int main() {
char *msg = *(sys_siglist + 1);
; return 0; }
EOF
if { (eval echo configure:2486: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_decl_sys_siglist=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_decl_sys_siglist=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_decl_sys_siglist" 1>&6
if test $ac_cv_decl_sys_siglist = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SYS_SIGLIST_DECLARED
EOF
cat >> confdefs.h <<\EOF
#define SYS_SIGLIST_DECLARED 1
EOF
}

fi


echo $ac_n "checking for struct utimbuf""... $ac_c" 1>&6
echo "configure:2511: checking for struct utimbuf" >&5
cat > conftest.$ac_ext <<EOF
#line 2513 "configure"
#include "confdefs.h"
#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
#ifdef HAVE_UTIME_H
#include <utime.h>
#endif
int main() {
static struct utimbuf x; x.actime = x.modtime;
; return 0; }
EOF
if { (eval echo configure:2532: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_STRUCT_UTIMBUF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STRUCT_UTIMBUF 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:2552: checking return type of signal handlers" >&5

cat > conftest.$ac_ext <<EOF
#line 2555 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:2572: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_signal" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining RETSIGTYPE = $ac_cv_type_signal
EOF
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF
}



echo $ac_n "checking for struct timeval""... $ac_c" 1>&6
echo "configure:2595: checking for struct timeval" >&5
cat > conftest.$ac_ext <<EOF
#line 2597 "configure"
#include "confdefs.h"
#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
int main() {
static struct timeval x; x.tv_sec = x.tv_usec;
; return 0; }
EOF
if { (eval echo configure:2613: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
  HAVE_TIMEVAL=yes
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TIMEVAL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TIMEVAL 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
   HAVE_TIMEVAL=no
fi
rm -f conftest*

echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
echo "configure:2635: checking whether struct tm is in sys/time.h or time.h" >&5

cat > conftest.$ac_ext <<EOF
#line 2638 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:2646: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TM_IN_SYS_TIME
EOF
cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF
}

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
echo "configure:2670: checking for tm_zone in struct tm" >&5

cat > conftest.$ac_ext <<EOF
#line 2673 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:2681: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TM_ZONE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF
}

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
echo "configure:2704: checking for tzname" >&5

cat > conftest.$ac_ext <<EOF
#line 2707 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:2717: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TZNAME
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF
}

  fi
fi


echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:2743: checking for working const" >&5

cat > conftest.$ac_ext <<EOF
#line 2746 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:2795: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining const = 
EOF
cat >> confdefs.h <<\EOF
#define const 
EOF
}

fi


echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
echo "configure:2820: checking whether ${MAKE-make} sets \${MAKE}" >&5
set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`

cat > conftestmake <<\EOF
all:
	@echo 'ac_maketemp="${MAKE}"'
EOF
# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
if test -n "$ac_maketemp"; then
  eval ac_cv_prog_make_${ac_make}_set=yes
else
  eval ac_cv_prog_make_${ac_make}_set=no
fi
rm -f conftestmake
if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  SET_MAKE=
else
  echo "$ac_t""no" 1>&6
  SET_MAKE="MAKE=${MAKE-make}"
fi


echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:2845: checking whether byte ordering is bigendian" >&5

ac_cv_c_bigendian=unknown
# See if sys/param.h defines the BYTE_ORDER macro.
cat > conftest.$ac_ext <<EOF
#line 2850 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
 bogus endian macros
#endif
; return 0; }
EOF
if { (eval echo configure:2861: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  # It does; now see whether it defined to BIG_ENDIAN or not.
cat > conftest.$ac_ext <<EOF
#line 2865 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if BYTE_ORDER != BIG_ENDIAN
 not big endian
#endif
; return 0; }
EOF
if { (eval echo configure:2876: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_bigendian=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_bigendian=no
fi
rm -f conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $ac_cv_c_bigendian = unknown; then
cat > conftest.$ac_ext <<EOF
#line 2893 "configure"
#include "confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
if { (eval echo configure:2906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_bigendian=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian=yes
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_c_bigendian" 1>&6
if test $ac_cv_c_bigendian = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining WORDS_BIGENDIAN
EOF
cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 1
EOF
}

fi


echo $ac_n "checking for long file names""... $ac_c" 1>&6
echo "configure:2932: checking for long file names" >&5

ac_cv_sys_long_file_names=yes
# Test for long file names in all the places we know might matter:
#      .		the current directory, where building will happen
#      $prefix/lib	where we will be installing things
#      $exec_prefix/lib	likewise
# eval it to expand exec_prefix.
#      $TMPDIR		if set, where it might want to write temporary files
# if $TMPDIR is not set:
#      /tmp		where it might want to write temporary files
#      /var/tmp		likewise
#      /usr/tmp		likewise
if test -n "$TMPDIR" && test -d "$TMPDIR" && test -w "$TMPDIR"; then
  ac_tmpdirs="$TMPDIR"
else
  ac_tmpdirs='/tmp /var/tmp /usr/tmp'
fi
for ac_dir in  . $ac_tmpdirs `eval echo $prefix/lib $exec_prefix/lib` ; do
  test -d $ac_dir || continue
  test -w $ac_dir || continue # It is less confusing to not echo anything here.
  (echo 1 > $ac_dir/conftest9012345) 2>/dev/null
  (echo 2 > $ac_dir/conftest9012346) 2>/dev/null
  val=`cat $ac_dir/conftest9012345 2>/dev/null`
  if test ! -f $ac_dir/conftest9012345 || test "$val" != 1; then
    ac_cv_sys_long_file_names=no
    rm -f $ac_dir/conftest9012345 $ac_dir/conftest9012346 2>/dev/null
    break
  fi
  rm -f $ac_dir/conftest9012345 $ac_dir/conftest9012346 2>/dev/null
done

echo "$ac_t""$ac_cv_sys_long_file_names" 1>&6
if test $ac_cv_sys_long_file_names = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_LONG_FILE_NAMES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LONG_FILE_NAMES 1
EOF
}

fi




echo $ac_n "checking for sqrt in -lm""... $ac_c" 1>&6
echo "configure:2980: checking for sqrt in -lm" >&5
ac_lib_var=`echo m'_'sqrt | sed 'y%./+-%__p_%'`

xe_check_libs=" -lm "
cat > conftest.$ac_ext <<EOF
#line 2985 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sqrt();

int main() {
sqrt()
; return 0; }
EOF
if { (eval echo configure:2996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi



echo "checking type of mail spool file locking" 1>&6
echo "configure:3029: checking type of mail spool file locking" >&5
test -z "$mail_locking" -a "$mail_use_flock" = "yes" && mail_locking=flock
test -z "$mail_locking" -a "$mail_use_lockf" = "yes" && mail_locking=lockf
if   test "$mail_locking" = "lockf"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REAL_MAIL_USE_LOCKF
EOF
cat >> confdefs.h <<\EOF
#define REAL_MAIL_USE_LOCKF 1
EOF
}

elif test "$mail_locking" = "flock"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REAL_MAIL_USE_FLOCK
EOF
cat >> confdefs.h <<\EOF
#define REAL_MAIL_USE_FLOCK 1
EOF
}

fi

if test "$need_dynodump" = "yes" ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DYNODUMP
EOF
cat >> confdefs.h <<\EOF
#define DYNODUMP 1
EOF
}

  MAKE_SUBDIR="$MAKE_SUBDIR dynodump"
  case "$canonical" in
    sparc*   ) dynodump_arch=sparc ;;
    powerpc* ) dynodump_arch=ppc   ;;
    i*86*    ) dynodump_arch=i386  ;;
  esac
    test "$GCC" = "yes" && ld_switch_site="-fno-gnu-linker $ld_switch_site"
fi

for dir in "/usr/ccs/lib"; do
  test -d "$dir" && ld_switch_site="$ld_switch_site -L${dir}"
done


echo "checking "for specified window system"" 1>&6
echo "configure:3074: checking "for specified window system"" >&5

if test "$x_includes $x_libraries" = "NONE NONE"; then
  if test -n "$OPENWINHOME" \
   -a "$OPENWINHOME" != "/usr/openwin" \
   -a -d "$OPENWINHOME"; then
    test -d "$OPENWINHOME/lib"           && x_libraries="$OPENWINHOME/lib"
    test -d "$OPENWINHOME/include"       && x_includes="$OPENWINHOME/include"
    test -d "$OPENWINHOME/share/include" && x_includes="$OPENWINHOME/share/include"
  fi
fi

test "$x_includes $x_libraries" != "NONE NONE" && \
 window_system=x11 with_x11=yes

if test "$with_x11" != "no"; then
  # If we find X, set shell vars x_includes and x_libraries to the
# paths, otherwise set no_x=yes.
# Uses ac_ vars as temps to allow command line to override cache and checks.
# --without-x overrides everything else, but does not touch the cache.
echo $ac_n "checking for X""... $ac_c" 1>&6
echo "configure:3095: checking for X" >&5

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  :
fi

# $have_x is `yes', `no', `disabled', or empty when we do not yet know.
if test "x$with_x" = xno; then
  # The user explicitly disabled X.
  have_x=disabled
else
  if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
    # Both variables are already set.
    have_x=yes
  else

# One or both of the vars are not set, and there is no cached value.
ac_x_includes=NO ac_x_libraries=NO
rm -fr conftestdir
if mkdir conftestdir; then
  cd conftestdir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    eval `${MAKE-make} acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    for ac_extension in a so sl; do
      if test ! -f $ac_im_usrlibdir/libX11.$ac_extension &&
        test -f $ac_im_libdir/libX11.$ac_extension; then
        ac_im_usrlibdir=$ac_im_libdir; break
      fi
    done
    # Screen out bogus values from the imake configuration.  They are
    # bogus both because they are the default anyway, and because
    # using them would break gcc on systems where it needs fixed includes.
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -d "$ac_im_usrlibdir" && ac_x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr conftestdir
fi

if test "$ac_x_includes" = NO; then
  # Guess where to find include files, by looking for this one X11 .h file.
  test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h

  # First, try using that file with no special directory specified.
cat > conftest.$ac_ext <<EOF
#line 3155 "configure"
#include "confdefs.h"
#include <$x_direct_test_include>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3160: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  # We can compile using X headers with no special include directory.
ac_x_includes=
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  # Look for the header file in a standard set of common directories.
# Check X11 before X11Rn because it is often a symlink to the current release.
  for ac_dir in               \
    /usr/X11/include          \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11          \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11/include    \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11    \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      ac_x_includes=$ac_dir
      break
    fi
  done
fi
rm -f conftest*
fi # $ac_x_includes = NO

if test "$ac_x_libraries" = NO; then
  # Check for the libraries.

  test -z "$x_direct_test_library" && x_direct_test_library=Xt
  test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc

  # See if we find them without any special options.
  # Don't add to $LIBS permanently.
  ac_save_LIBS="$LIBS"
  LIBS="-l$x_direct_test_library $LIBS"
cat > conftest.$ac_ext <<EOF
#line 3229 "configure"
#include "confdefs.h"

int main() {
${x_direct_test_function}()
; return 0; }
EOF
if { (eval echo configure:3236: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# We can link X programs with no special library path.
ac_x_libraries=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# First see if replacing the include by lib works.
# Check X11 before X11Rn because it is often a symlink to the current release.
for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
    /usr/X11/lib          \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11/lib    \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11    \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
    /lib/usr/lib/X11	  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      ac_x_libraries=$ac_dir
      break 2
    fi
  done
done
fi
rm -f conftest*
fi # $ac_x_libraries = NO

if test "$ac_x_includes" = NO || test "$ac_x_libraries" = NO; then
  # Didn't find X anywhere.  Cache the known absence of X.
  ac_cv_have_x="have_x=no"
else
  # Record where we found X for the cache.
  ac_cv_have_x="have_x=yes \
	        ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
fi
  fi
  eval "$ac_cv_have_x"
fi # $with_x != no

if test "$have_x" != yes; then
  echo "$ac_t""$have_x" 1>&6
  no_x=yes
else
  # If each of the values was on the command line, it overrides each guess.
  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
  # Update the cache value to reflect the command line values.
  ac_cv_have_x="have_x=yes \
		ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
  echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&6
fi

if test "$no_x" = yes; then
  # Not all programs may use this symbol, but it does not hurt to define it.
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining X_DISPLAY_MISSING
EOF
cat >> confdefs.h <<\EOF
#define X_DISPLAY_MISSING 1
EOF
}

  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
else
  if test -n "$x_includes"; then
    X_CFLAGS="$X_CFLAGS -I$x_includes"
  fi

  # It would also be nice to do this for all -L options, not just this one.
  if test -n "$x_libraries"; then
    X_LIBS="$X_LIBS -L$x_libraries"
    # For Solaris; some versions of Sun CC require a space after -R and
    # others require no space.  Words are not sufficient . . . .
    case "`(uname -sr) 2>/dev/null`" in
    "SunOS 5"*)
      echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
echo "configure:3345: checking whether -R must be followed by a space" >&5
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
      cat > conftest.$ac_ext <<EOF
#line 3348 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:3355: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_R_nospace=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_nospace=no
fi
rm -f conftest*
      if test $ac_R_nospace = yes; then
	echo "$ac_t""no" 1>&6
	X_LIBS="$X_LIBS -R$x_libraries"
      else
	LIBS="$ac_xsave_LIBS -R $x_libraries"
	cat > conftest.$ac_ext <<EOF
#line 3371 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:3378: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_R_space=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_space=no
fi
rm -f conftest*
	if test $ac_R_space = yes; then
	  echo "$ac_t""yes" 1>&6
	  X_LIBS="$X_LIBS -R $x_libraries"
	else
	  echo "$ac_t""neither works" 1>&6
	fi
      fi
      LIBS="$ac_xsave_LIBS"
    esac
  fi

  # Check for system-dependent libraries X programs must link with.
  # Do this before checking for the system-independent R6 libraries
  # (-lICE), since we may need -lsocket or whatever for X linking.

  if test "$ISC" = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
  else
    # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
    # libraries were built with DECnet support.  And karl@cs.umb.edu says
    # the Alpha needs dnet_stub (dnet does not exist).
    if test "$with_dnet" = "no"; then
ac_cv_lib_dnet_dnet_ntoa=no
else

echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
echo "configure:3414: checking for dnet_ntoa in -ldnet" >&5
ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldnet "
cat > conftest.$ac_ext <<EOF
#line 3419 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:3430: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
else
  echo "$ac_t""no" 1>&6
fi

fi

    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
      
echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
echo "configure:3454: checking for dnet_ntoa in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldnet_stub "
cat > conftest.$ac_ext <<EOF
#line 3459 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:3470: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
    # to get the SysV transport functions.
    # chad@anasazi.com says the Pyramis MIS-ES running DC/OSx (SVR4)
    # needs -lnsl.
    # The nsl library prevents programs from opening the X display
    # on Irix 5.2, according to dickey@clark.net.
    echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
echo "configure:3499: checking for gethostbyname" >&5

cat > conftest.$ac_ext <<EOF
#line 3502 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyname) || defined (__stub___gethostbyname)
choke me
#else
gethostbyname();
#endif

; return 0; }
EOF
if { (eval echo configure:3525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_gethostbyname = no; then
      
echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
echo "configure:3546: checking for gethostbyname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`

xe_check_libs=" -lnsl "
cat > conftest.$ac_ext <<EOF
#line 3551 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {
gethostbyname()
; return 0; }
EOF
if { (eval echo configure:3562: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # lieder@skyler.mavd.honeywell.com says without -lsocket,
    # socket/setsockopt and other routines are undefined under SCO ODT
    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
    # on later versions), says simon@lia.di.epfl.ch: it contains
    # gethostby* variants that don't use the nameserver (or something).
    # -lsocket must be given before -lnsl if both are needed.
    # We assume that if connect needs -lnsl, so does gethostbyname.
    echo $ac_n "checking for connect""... $ac_c" 1>&6
echo "configure:3592: checking for connect" >&5

cat > conftest.$ac_ext <<EOF
#line 3595 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char connect(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_connect) || defined (__stub___connect)
choke me
#else
connect();
#endif

; return 0; }
EOF
if { (eval echo configure:3618: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_connect=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_connect=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'connect`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_connect = no; then
      
xe_msg_checking="for connect in -lsocket"
test -n "$X_EXTRA_LIBS" && xe_msg_checking="$xe_msg_checking using extra libs $X_EXTRA_LIBS"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:3641: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`

xe_check_libs=" -lsocket $X_EXTRA_LIBS"
cat > conftest.$ac_ext <<EOF
#line 3646 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {
connect()
; return 0; }
EOF
if { (eval echo configure:3657: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
    echo $ac_n "checking for remove""... $ac_c" 1>&6
echo "configure:3681: checking for remove" >&5

cat > conftest.$ac_ext <<EOF
#line 3684 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char remove(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_remove) || defined (__stub___remove)
choke me
#else
remove();
#endif

; return 0; }
EOF
if { (eval echo configure:3707: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_remove=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_remove=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'remove`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_remove = no; then
      
echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
echo "configure:3728: checking for remove in -lposix" >&5
ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`

xe_check_libs=" -lposix "
cat > conftest.$ac_ext <<EOF
#line 3733 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {
remove()
; return 0; }
EOF
if { (eval echo configure:3744: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
    echo $ac_n "checking for shmat""... $ac_c" 1>&6
echo "configure:3768: checking for shmat" >&5

cat > conftest.$ac_ext <<EOF
#line 3771 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmat(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
#else
shmat();
#endif

; return 0; }
EOF
if { (eval echo configure:3794: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_shmat=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shmat=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'shmat`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_shmat = no; then
      
echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
echo "configure:3815: checking for shmat in -lipc" >&5
ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`

xe_check_libs=" -lipc "
cat > conftest.$ac_ext <<EOF
#line 3820 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {
shmat()
; return 0; }
EOF
if { (eval echo configure:3831: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
else
  echo "$ac_t""no" 1>&6
fi


    fi
  fi

  # Check for libraries that X11R6 Xt/Xaw programs need.
  ac_save_LDFLAGS="$LDFLAGS"
  test -n "$x_libraries" && LDFLAGS="$LDFLAGS -L$x_libraries"
  # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
  # check for ICE first), but we must link in the order -lSM -lICE or
  # we get undefined symbols.  So assume we have SM if we have ICE.
  # These have to be linked with before -lX11, unlike the other
  # libraries we check for below, so use a different variable.
  #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
  
echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
echo "configure:3865: checking for IceConnectionNumber in -lICE" >&5
ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`

xe_check_libs=" -lICE "
cat > conftest.$ac_ext <<EOF
#line 3870 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceConnectionNumber();

int main() {
IceConnectionNumber()
; return 0; }
EOF
if { (eval echo configure:3881: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
else
  echo "$ac_t""no" 1>&6
fi


  LDFLAGS="$ac_save_LDFLAGS"

fi
 # Autoconf claims to find X library and include dirs for us.
  if test "$no_x" = "yes"
  then with_x11=no  window_system=none HAVE_X_WINDOWS=no
  else with_x11=yes window_system=x11  HAVE_X_WINDOWS=yes
  fi
fi

case "$with_x11" in
  yes ) window_system=x11  HAVE_X_WINDOWS=yes ;;
  no  ) window_system=none HAVE_X_WINDOWS=no  ;;
esac

if test "$with_x11" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_X_WINDOWS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_X_WINDOWS 1
EOF
}

  MAKE_SUBDIR="$MAKE_SUBDIR lwlib"

      for lib_dir in "/usr/dt/lib" "/usr/lib/Motif1.2" "/usr/lib/Motif1.1"; do
    inc_dir="`echo $lib_dir | sed 's/lib/include/'`"
    if test -d "$lib_dir" -a -d "$inc_dir"; then
      case "$x_libraries" in *"$lib_dir"* ) : ;; *)
        x_libraries="$lib_dir $x_libraries" X_LIBS="-L${lib_dir} $X_LIBS"
      esac
      case "$x_includes" in "$inc_dir"* ) : ;; *)
        x_includes="$inc_dir $x_includes" X_CFLAGS="-I${inc_dir} $X_CFLAGS"
      esac
      break;       fi
  done

    for rel in "X11R6" "X11R5" "X11R4"; do
    lib_dir="/usr/contrib/$rel/lib" inc_dir="/usr/contrib/$rel/include"
    if test -d "$lib_dir" -a -d "$inc_dir"; then
      case "$x_libraries" in *"$lib_dir"* ) : ;; *)
        x_libraries="$x_libraries $lib_dir" X_LIBS="$X_LIBS -L${lib_dir}"
      esac
      case "$x_includes" in "$inc_dir"* ) : ;; *)
        x_includes="$x_includes $inc_dir" X_CFLAGS="$X_CFLAGS -I${inc_dir}"
      esac
      break;     fi
  done

  ld_switch_x_site="$X_LIBS"

  if test "$extra_verbose" = "yes"; then
    echo; echo "X11 compilation variables:"
    echo "x_libraries = $x_libraries"
echo "x_includes = $x_includes"
echo "X_CFLAGS = $X_CFLAGS"
echo "X_LIBS = $X_LIBS"
echo "X_PRE_LIBS = $X_PRE_LIBS"
echo "X_EXTRA_LIBS = $X_EXTRA_LIBS"
    echo
  fi

    ac_safe=`echo "X11/Intrinsic.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Intrinsic.h""... $ac_c" 1>&6
echo "configure:3966: checking for X11/Intrinsic.h" >&5

cat > conftest.$ac_ext <<EOF
#line 3969 "configure"
#include "confdefs.h"
#include <X11/Intrinsic.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3974: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 header files."" 1>&2; exit 1; }
fi


      
echo $ac_n "checking for XOpenDisplay in -lX11""... $ac_c" 1>&6
echo "configure:3998: checking for XOpenDisplay in -lX11" >&5
ac_lib_var=`echo X11'_'XOpenDisplay | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 "
cat > conftest.$ac_ext <<EOF
#line 4003 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XOpenDisplay();

int main() {
XOpenDisplay()
; return 0; }
EOF
if { (eval echo configure:4014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_lib_x11=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$have_lib_x11" != "yes"; then
    
xe_msg_checking="for XGetFontProperty in -lX11"
test -n "-b i486-linuxaout" && xe_msg_checking="$xe_msg_checking using extra libs -b i486-linuxaout"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:4039: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo X11'_'XGetFontProperty | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 -b i486-linuxaout"
cat > conftest.$ac_ext <<EOF
#line 4044 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XGetFontProperty();

int main() {
XGetFontProperty()
; return 0; }
EOF
if { (eval echo configure:4055: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ld_switch_x_site="-b i486-linuxaout $ld_switch_x_site"
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 libraries."" 1>&2; exit 1; }
fi


  fi
  libs_x="-lX11"

  case "$canonical" in *-sunos4.* ) # Bug workaround
   ld_switch_x_site="$ld_switch_x_site -u _XtToolkitInitialize" ;;
  esac
  
echo $ac_n "checking for XtOpenDisplay in -lXt""... $ac_c" 1>&6
echo "configure:4084: checking for XtOpenDisplay in -lXt" >&5
ac_lib_var=`echo Xt'_'XtOpenDisplay | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXt "
cat > conftest.$ac_ext <<EOF
#line 4089 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtOpenDisplay();

int main() {
XtOpenDisplay()
; return 0; }
EOF
if { (eval echo configure:4100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXt $libs_x"
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 libraries."" 1>&2; exit 1; }
fi



  echo $ac_n "checking the version of X11 being used""... $ac_c" 1>&6
echo "configure:4123: checking the version of X11 being used" >&5
  cat > conftest.$ac_ext <<EOF
#line 4125 "configure"
#include "confdefs.h"
#include <X11/Intrinsic.h>
    main(int c, char* v[]) { return c>1 ? XlibSpecificationRelease : 0; }
EOF
if { (eval echo configure:4130: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ./conftest foobar; rc=$?
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  rc=4
fi
rm -fr conftest*
  echo "$ac_t""R${rc}" 1>&6
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining THIS_IS_X11R${rc}
EOF
cat >> confdefs.h <<EOF
#define THIS_IS_X11R${rc} 1
EOF
}


  for ac_hdr in X11/Xlocale.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:4154: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 4157 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4162: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


    echo $ac_n "checking for XFree86""... $ac_c" 1>&6
echo "configure:4193: checking for XFree86" >&5
  if test -d "/usr/X386/include" -o \
          -f "/etc/XF86Config" -o \
	  -f "/etc/X11/XF86Config" -o \
	  -f "/usr/X11R6/lib/X11/XF86Config"; then
    echo "$ac_t""yes" 1>&6
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XFREE386
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XFREE386 1
EOF
}

  else
    echo "$ac_t""no" 1>&6
  fi

    
echo $ac_n "checking for XShapeSelectInput in -lXext""... $ac_c" 1>&6
echo "configure:4213: checking for XShapeSelectInput in -lXext" >&5
ac_lib_var=`echo Xext'_'XShapeSelectInput | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXext "
cat > conftest.$ac_ext <<EOF
#line 4218 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XShapeSelectInput();

int main() {
XShapeSelectInput()
; return 0; }
EOF
if { (eval echo configure:4229: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXext $libs_x"
else
  echo "$ac_t""no" 1>&6
fi



    case "$canonical" in *-sunos4.* ) # Bug workaround
    ld_switch_x_site="$ld_switch_x_site -u _get_applicationShellWidgetClass" ;;
  esac
  if test -z "$with_xmu"; then
    
echo $ac_n "checking for XmuConvertStandardSelection in -lXmu""... $ac_c" 1>&6
echo "configure:4256: checking for XmuConvertStandardSelection in -lXmu" >&5
ac_lib_var=`echo Xmu'_'XmuConvertStandardSelection | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXmu "
cat > conftest.$ac_ext <<EOF
#line 4261 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmuConvertStandardSelection();

int main() {
XmuConvertStandardSelection()
; return 0; }
EOF
if { (eval echo configure:4272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_xmu=yes
else
  echo "$ac_t""no" 1>&6
with_xmu=no
fi


  fi
  if test "$with_xmu" = "no"; then
    extra_objs="$extra_objs xmu.o"
  else
    libs_x="-lXmu $libs_x"
  fi

      
echo $ac_n "checking for main in -lXbsd""... $ac_c" 1>&6
echo "configure:4302: checking for main in -lXbsd" >&5
ac_lib_var=`echo Xbsd'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXbsd "
cat > conftest.$ac_ext <<EOF
#line 4307 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:4314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXbsd $libs_x"
else
  echo "$ac_t""no" 1>&6
fi



    ac_safe=`echo "Xm/Xm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Xm/Xm.h""... $ac_c" 1>&6
echo "configure:4337: checking for Xm/Xm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 4340 "configure"
#include "confdefs.h"
#include <Xm/Xm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4345: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
echo $ac_n "checking for XmStringFree in -lXm""... $ac_c" 1>&6
echo "configure:4362: checking for XmStringFree in -lXm" >&5
ac_lib_var=`echo Xm'_'XmStringFree | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 4367 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmStringFree();

int main() {
XmStringFree()
; return 0; }
EOF
if { (eval echo configure:4378: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_motif=yes
else
  echo "$ac_t""no" 1>&6
have_motif=no
fi


else
  echo "$ac_t""no" 1>&6
have_motif=no
fi


    
echo $ac_n "checking for XawScrollbarSetThumb in -lXaw""... $ac_c" 1>&6
echo "configure:4407: checking for XawScrollbarSetThumb in -lXaw" >&5
ac_lib_var=`echo Xaw'_'XawScrollbarSetThumb | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXaw "
cat > conftest.$ac_ext <<EOF
#line 4412 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XawScrollbarSetThumb();

int main() {
XawScrollbarSetThumb()
; return 0; }
EOF
if { (eval echo configure:4423: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_xaw=yes
else
  echo "$ac_t""no" 1>&6
have_xaw=no
fi



fi 
test -z "$window_system" && window_system="none"

if test "$window_system" = "none" ; then
  if test "$with_tty" = "no" ; then
    { echo "configure: error: No window system support and no TTY support - Unable to proceed." 1>&2; exit 1; }
  fi
  for feature in tooltalk cde offix \
                 menubars scrollbars toolbars dialogs xim xmu \
                 tiff png jpeg gif compface xpm
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without X support" 1>&2
    fi
    eval "with_${feature}=no"
  done
else
  test -z "$with_toolbars" && with_toolbars=yes
fi

if false; then # obsolete
runtime_arg="-R${dash_r_space}"

case "$canonical" in
  *-sun-solaris* | *-sun-sunos5* )
    add_runtime_flag=yes ;;
  *-sgi-irix5.* )
                if test -n "$x_libraries" || test -n "$site_runtime_libraries" ; then
      (echo "WARNING: The IRIX 5 ld ignores all but the last -rpath argument,";
       echo "         so if you need to specify more than one additional";
       echo "         runtime library directory, you will have to do so";
       echo "         manually by setting the environment variable";
       echo "         LD_SWITCH_SITE to '-rpath <path>' before running";
       echo "         configure.  If you have only one additional directory,"
       echo "         you can specify it with --site-runtime-libraries.") >&2
    fi
    runtime_arg="-rpath " ;;
  *-sgi-irix* )
                        add_runtime_flag=yes;
    runtime_arg="-rpath " ;;
esac
fi

if test -n "$site_libraries"; then
  for arg in $site_libraries; do
    test -d "$arg" && arg="-L${arg}"
    ld_switch_site="$ld_switch_site $arg"
  done
fi

if test -n "$site_runtime_libraries" ; then
  LD_RUN_PATH="`echo $site_runtime_libraries | sed 's/ 	*/:/'`"
  export LD_RUN_PATH
fi

if test -n "$site_includes" ; then
  for arg in $site_includes; do
    test -d "$arg" && arg="-I${arg}"
    c_switch_site="$c_switch_site $arg"
  done
fi


bitmapdir=

case "$window_system" in
  x11  ) HAVE_X_WINDOWS=yes; echo "  Using X11." ;;
  none ) HAVE_X_WINDOWS=no ; echo "  Using no window system." ;;
esac

case "$x_libraries" in *X11R4* )
  test "$opsys" = "hpux9"     && opsysfile="s/hpux9-x11r4.h"
  test "$opsys" = "hpux9-shr" && opsysfile="s/hpux9shxr4.h"
esac

{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISP_FLOAT_TYPE
EOF
cat >> confdefs.h <<\EOF
#define LISP_FLOAT_TYPE 1
EOF
}
 

echo $ac_n "checking for kstat_open in -lkstat""... $ac_c" 1>&6
echo "configure:4530: checking for kstat_open in -lkstat" >&5
ac_lib_var=`echo kstat'_'kstat_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lkstat "
cat > conftest.$ac_ext <<EOF
#line 4535 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kstat_open();

int main() {
kstat_open()
; return 0; }
EOF
if { (eval echo configure:4546: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo kstat | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lkstat $LIBS"

else
  echo "$ac_t""no" 1>&6
fi




echo $ac_n "checking for kvm_read in -lkvm""... $ac_c" 1>&6
echo "configure:4580: checking for kvm_read in -lkvm" >&5
ac_lib_var=`echo kvm'_'kvm_read | sed 'y%./+-%__p_%'`

xe_check_libs=" -lkvm "
cat > conftest.$ac_ext <<EOF
#line 4585 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kvm_read();

int main() {
kvm_read()
; return 0; }
EOF
if { (eval echo configure:4596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo kvm | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lkvm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi




echo $ac_n "checking for cma_open in -lpthreads""... $ac_c" 1>&6
echo "configure:4630: checking for cma_open in -lpthreads" >&5
ac_lib_var=`echo pthreads'_'cma_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpthreads "
cat > conftest.$ac_ext <<EOF
#line 4635 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cma_open();

int main() {
cma_open()
; return 0; }
EOF
if { (eval echo configure:4646: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo pthreads | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lpthreads $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


if test "$ac_cv_lib_pthreads_cma_open" = "yes"; then
   case "$opsys" in decosf*) c_switch_site="$c_switch_site -threads";; esac
fi

echo $ac_n "checking whether the -xildoff compiler flag is required""... $ac_c" 1>&6
echo "configure:4682: checking whether the -xildoff compiler flag is required" >&5
if   ${CC-cc} '-###' -xildon  no_such_file.c 2>&1 | grep '^[^ ]*/ild ' > /dev/null ; then
  if ${CC-cc} '-###' -xildoff no_such_file.c 2>&1 | grep '^[^ ]*/ild ' > /dev/null ;
    then echo "$ac_t""no" 1>&6;
    else echo "$ac_t""yes" 1>&6; ld_switch_site="$ld_switch_site -xildoff"
  fi
  else echo "$ac_t""no" 1>&6
fi

test -z "$with_xauth" && test "$window_system" = "none" && with_xauth=no
test -z "$with_xauth" && { ac_safe=`echo "X11/Xauth.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xauth.h""... $ac_c" 1>&6
echo "configure:4694: checking for X11/Xauth.h" >&5

cat > conftest.$ac_ext <<EOF
#line 4697 "configure"
#include "confdefs.h"
#include <X11/Xauth.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4702: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xauth=no
fi
 }
test -z "$with_xauth" && { 
echo $ac_n "checking for XauGetAuthByAddr in -lXau""... $ac_c" 1>&6
echo "configure:4725: checking for XauGetAuthByAddr in -lXau" >&5
ac_lib_var=`echo Xau'_'XauGetAuthByAddr | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXau "
cat > conftest.$ac_ext <<EOF
#line 4730 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XauGetAuthByAddr();

int main() {
XauGetAuthByAddr()
; return 0; }
EOF
if { (eval echo configure:4741: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xauth=no
fi

 }
test -z "$with_xauth" && with_xauth=yes
if test "$with_xauth" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XAUTH
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XAUTH 1
EOF
}

  libs_x="-lXau $libs_x"
fi

test -z "$with_offix" && { ac_safe=`echo "OffiX/DragAndDrop.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for OffiX/DragAndDrop.h""... $ac_c" 1>&6
echo "configure:4777: checking for OffiX/DragAndDrop.h" >&5

cat > conftest.$ac_ext <<EOF
#line 4780 "configure"
#include "confdefs.h"
#include <OffiX/DragAndDrop.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4785: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_offix=no
fi
 }
test -z "$with_offix" && { 
echo $ac_n "checking for DndInitialize in -lDnd""... $ac_c" 1>&6
echo "configure:4808: checking for DndInitialize in -lDnd" >&5
ac_lib_var=`echo Dnd'_'DndInitialize | sed 'y%./+-%__p_%'`

xe_check_libs=" -lDnd "
cat > conftest.$ac_ext <<EOF
#line 4813 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char DndInitialize();

int main() {
DndInitialize()
; return 0; }
EOF
if { (eval echo configure:4824: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  : 
else
  echo "$ac_t""no" 1>&6
with_offix=no
fi

 }
test -z "$with_offix" && with_offix=yes
if test "$with_offix" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_OFFIX_DND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_OFFIX_DND 1
EOF
}

  libs_x="-lDnd $libs_x"
fi

test "$with_cde" = "yes" && with_tooltalk=yes # CDE requires tooltalk
if test "$with_tooltalk" != "no" ; then
      for dir in "" "Tt/" "desktop/" ; do
    ac_safe=`echo "${dir}tt_c.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${dir}tt_c.h""... $ac_c" 1>&6
echo "configure:4863: checking for ${dir}tt_c.h" >&5

cat > conftest.$ac_ext <<EOF
#line 4866 "configure"
#include "confdefs.h"
#include <${dir}tt_c.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4871: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  tt_c_h_path="${dir}tt_c.h" && break
else
  echo "$ac_t""no" 1>&6
fi

  done
  test -z "$tt_c_h_path" && with_tooltalk=no
fi
if test "$with_tooltalk" != "no" ; then
  for extra_libs in "" "-lI18N -lce" "-lcxx"; do
    
xe_msg_checking="for tt_message_create in -ltt"
test -n "$extra_libs" && xe_msg_checking="$xe_msg_checking using extra libs $extra_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:4900: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo tt'_'tt_message_create | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltt $extra_libs"
cat > conftest.$ac_ext <<EOF
#line 4905 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tt_message_create();

int main() {
tt_message_create()
; return 0; }
EOF
if { (eval echo configure:4916: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_tooltalk=yes tt_libs="-ltt $extra_libs"; break
else
  echo "$ac_t""no" 1>&6
:
fi


  done
fi
test -z "$with_tooltalk" && with_tooltalk=no
if test "$with_tooltalk" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TOOLTALK
EOF
cat >> confdefs.h <<\EOF
#define TOOLTALK 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining TT_C_H_PATH = "$tt_c_h_path"
EOF
cat >> confdefs.h <<EOF
#define TT_C_H_PATH "$tt_c_h_path"
EOF
}

  libs_x="$tt_libs $libs_x"
  extra_objs="$extra_objs tooltalk.o"
fi

test -z "$with_cde" && { ac_safe=`echo "Dt/Dt.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Dt/Dt.h""... $ac_c" 1>&6
echo "configure:4963: checking for Dt/Dt.h" >&5

cat > conftest.$ac_ext <<EOF
#line 4966 "configure"
#include "confdefs.h"
#include <Dt/Dt.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:4971: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_cde=no
fi
 }
test -z "$with_cde" && { 
echo $ac_n "checking for DtDndDragStart in -lDtSvc""... $ac_c" 1>&6
echo "configure:4994: checking for DtDndDragStart in -lDtSvc" >&5
ac_lib_var=`echo DtSvc'_'DtDndDragStart | sed 'y%./+-%__p_%'`

xe_check_libs=" -lDtSvc "
cat > conftest.$ac_ext <<EOF
#line 4999 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char DtDndDragStart();

int main() {
DtDndDragStart()
; return 0; }
EOF
if { (eval echo configure:5010: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_cde=no
fi

 }
test -z "$with_cde" && with_cde=yes
if test "$with_cde" = "yes" ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CDE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CDE 1
EOF
}

  libs_x="-lDtSvc $libs_x"
  with_tooltalk=yes # CDE requires Tooltalk
  with_motif=yes    # CDE requires Motif
fi

if test "$with_energize" = "yes" ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ENERGIZE
EOF
cat >> confdefs.h <<\EOF
#define ENERGIZE 1
EOF
}

  
echo $ac_n "checking for main in -lenergize""... $ac_c" 1>&6
echo "configure:5057: checking for main in -lenergize" >&5
ac_lib_var=`echo energize'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lenergize "
cat > conftest.$ac_ext <<EOF
#line 5062 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5069: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lenergize"
     energize_version="3.X"
     { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ENERGIZE_3
EOF
cat >> confdefs.h <<\EOF
#define ENERGIZE_3 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi


  if test -z "$energize_version"; then
    
echo $ac_n "checking for main in -lconn""... $ac_c" 1>&6
echo "configure:5101: checking for main in -lconn" >&5
ac_lib_var=`echo conn'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lconn "
cat > conftest.$ac_ext <<EOF
#line 5106 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5113: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lconn"
      energize_version="2.X"
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ENERGIZE_2
EOF
cat >> confdefs.h <<\EOF
#define ENERGIZE_2 1
EOF
}

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Unable to find Energize library." 1>&2; exit 1; }
fi


    fi
  ac_safe=`echo "editorconn.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for editorconn.h""... $ac_c" 1>&6
echo "configure:5146: checking for editorconn.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5149 "configure"
#include "confdefs.h"
#include <editorconn.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5154: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Unable to find Energize editorconn.h header file." 1>&2; exit 1; }
fi


  test "$energize_version" = "2.X" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ENERGIZE_2
EOF
cat >> confdefs.h <<\EOF
#define ENERGIZE_2 1
EOF
}

  test "$energize_version" = "3.X" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ENERGIZE_3
EOF
cat >> confdefs.h <<\EOF
#define ENERGIZE_3 1
EOF
}

fi


echo "checking for graphics libraries" 1>&6
echo "configure:5196: checking for graphics libraries" >&5
test -z "$with_gif" && with_gif=yes;
if test "$with_gif" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GIF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GIF 1
EOF
}

  extra_objs="$extra_objs dgif_lib.o gif_err.o gifalloc.o"
fi

test -z "$with_xpm" && { ac_safe=`echo "X11/xpm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/xpm.h""... $ac_c" 1>&6
echo "configure:5212: checking for X11/xpm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5215 "configure"
#include "confdefs.h"
#include <X11/xpm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5220: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xpm=no
fi
 }
test -z "$with_xpm" && { 
echo $ac_n "checking for XpmReadFileToData in -lXpm""... $ac_c" 1>&6
echo "configure:5243: checking for XpmReadFileToData in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmReadFileToData | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXpm "
cat > conftest.$ac_ext <<EOF
#line 5248 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmReadFileToData();

int main() {
XpmReadFileToData()
; return 0; }
EOF
if { (eval echo configure:5259: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xpm=no
fi

 }
test -z "$with_xpm" && with_xpm=yes
if test "$with_xpm" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XPM 1
EOF
}

  libs_x="-lXpm $libs_x"
fi

test -z "$with_xface" && { ac_safe=`echo "compface.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for compface.h""... $ac_c" 1>&6
echo "configure:5295: checking for compface.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5298 "configure"
#include "confdefs.h"
#include <compface.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5303: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi
 }
test -z "$with_xface" && { 
echo $ac_n "checking for UnGenFace in -lcompface""... $ac_c" 1>&6
echo "configure:5326: checking for UnGenFace in -lcompface" >&5
ac_lib_var=`echo compface'_'UnGenFace | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcompface "
cat > conftest.$ac_ext <<EOF
#line 5331 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char UnGenFace();

int main() {
UnGenFace()
; return 0; }
EOF
if { (eval echo configure:5342: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  : 
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi

 }
test -z "$with_xface" && with_xface=yes
if test "$with_xface" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XFACE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XFACE 1
EOF
}

  libs_x="-lcompface $libs_x"
fi

test -z "$with_jpeg" && { ac_safe=`echo "jpeglib.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for jpeglib.h""... $ac_c" 1>&6
echo "configure:5378: checking for jpeglib.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5381 "configure"
#include "confdefs.h"
#include <jpeglib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5386: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_jpeg=no
fi
 }
test -z "$with_jpeg" && { 
echo $ac_n "checking for jpeg_destroy_decompress in -ljpeg""... $ac_c" 1>&6
echo "configure:5409: checking for jpeg_destroy_decompress in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_destroy_decompress | sed 'y%./+-%__p_%'`

xe_check_libs=" -ljpeg "
cat > conftest.$ac_ext <<EOF
#line 5414 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_destroy_decompress();

int main() {
jpeg_destroy_decompress()
; return 0; }
EOF
if { (eval echo configure:5425: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_jpeg=no
fi

 }
test -z "$with_jpeg" && with_jpeg=yes
if test "$with_jpeg" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_JPEG
EOF
cat >> confdefs.h <<\EOF
#define HAVE_JPEG 1
EOF
}

  libs_x="-ljpeg $libs_x"
fi

test -z "$with_png" && { ac_safe=`echo "png.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for png.h""... $ac_c" 1>&6
echo "configure:5461: checking for png.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5464 "configure"
#include "confdefs.h"
#include <png.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5469: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi
 }
test -z "$with_png" && { echo $ac_n "checking for pow""... $ac_c" 1>&6
echo "configure:5491: checking for pow" >&5

cat > conftest.$ac_ext <<EOF
#line 5494 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char pow(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pow();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_pow) || defined (__stub___pow)
choke me
#else
pow();
#endif

; return 0; }
EOF
if { (eval echo configure:5517: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_pow=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_pow=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'pow`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi
 }
if test "$with_png" != "no"; then
  for extra_libs in "" "-lz" "-lgz"; do
    
xe_msg_checking="for png_read_image in -lpng"
test -n "$extra_libs" && xe_msg_checking="$xe_msg_checking using extra libs $extra_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:5542: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo png'_'png_read_image | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpng $extra_libs"
cat > conftest.$ac_ext <<EOF
#line 5547 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_read_image();

int main() {
png_read_image()
; return 0; }
EOF
if { (eval echo configure:5558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  png_libs="-lpng $extra_libs" with_png=yes; break
else
  echo "$ac_t""no" 1>&6
:
fi


  done
fi
test -z "$with_png" && with_png=no
if test "$with_png" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_PNG
EOF
cat >> confdefs.h <<\EOF
#define HAVE_PNG 1
EOF
}

  libs_x="$png_libs $libs_x"
fi

if test "$with_tiff" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TIFF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TIFF 1
EOF
}

  libs_x="-ltiff $libs_x"
fi


case "$with_menubars" in "" | "yes" | "athena" )
  with_menubars="lucid" ;;
esac
case "$with_dialogs" in "" | "yes" | "lucid"  )
  if   test "$have_motif" = "yes"; then with_dialogs="motif"
  elif test "$have_xaw"   = "yes"; then with_dialogs="athena"
  else with_dialogs=no
  fi ;;
esac
case "$with_scrollbars" in "" | "yes" )
  with_scrollbars="lucid" ;;
esac

all_widgets="$with_menubars $with_scrollbars $with_dialogs $with_toolbars"

case "$all_widgets" in *athena* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_ATHENA 1
EOF
}

  libs_x="-lXaw $libs_x" ;;
esac

case "$all_widgets" in *motif* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_MOTIF 1
EOF
}

  need_motif=yes ;;
esac

case "$with_scrollbars" in athena* ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_ATHENA 1
EOF
}
;; esac
case "$with_dialogs"    in athena* ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_ATHENA 1
EOF
}
   ;; esac
test "$with_scrollbars" = "athena3d" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_ATHENA3D
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_ATHENA3D 1
EOF
}

test "$with_dialogs"    = "athena3d" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_ATHENA3D
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_ATHENA3D 1
EOF
}


test "$with_menubars"   != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MENUBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MENUBARS 1
EOF
}

test "$with_scrollbars" != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SCROLLBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SCROLLBARS 1
EOF
}

test "$with_dialogs"    != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DIALOGS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DIALOGS 1
EOF
}

test "$with_toolbars"   != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TOOLBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TOOLBARS 1
EOF
}


test "$with_menubars"   = "lucid"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_MENUBARS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_MENUBARS_LUCID 1
EOF
}

test "$with_scrollbars" = "lucid"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_LUCID 1
EOF
}


test "$with_menubars"   = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_MENUBARS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_MENUBARS_MOTIF 1
EOF
}

test "$with_scrollbars" = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_MOTIF 1
EOF
}

test "$with_dialogs"    = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_MOTIF 1
EOF
}


test "$with_menubars"   != "no"      && extra_objs="$extra_objs menubar.o"
test "$with_scrollbars" != "no"      && extra_objs="$extra_objs scrollbar.o"
test "$with_dialogs"    != "no"      && extra_objs="$extra_objs dialog.o"
test "$with_toolbars"   != "no"      && extra_objs="$extra_objs toolbar.o"
test "$all_widgets" != "no no no no" && extra_objs="$extra_objs gui.o"

if test "$with_x11" = "yes"; then
  test "$with_menubars"   != "no"      && extra_objs="$extra_objs menubar-x.o"
  test "$with_scrollbars" != "no"      && extra_objs="$extra_objs scrollbar-x.o"
  test "$with_dialogs"    != "no"      && extra_objs="$extra_objs dialog-x.o"
  test "$with_toolbars"   != "no"      && extra_objs="$extra_objs toolbar-x.o"
  test "$all_widgets" != "no no no no" && extra_objs="$extra_objs gui-x.o"
fi


test -z "$with_mule" && with_mule=no

if test "$with_mule" = "yes" ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MULE
EOF
cat >> confdefs.h <<\EOF
#define MULE 1
EOF
}

  extra_objs="$extra_objs mule.o mule-ccl.o mule-charset.o mule-coding.o"

    
echo $ac_n "checking for strerror in -lintl""... $ac_c" 1>&6
echo "configure:5784: checking for strerror in -lintl" >&5
ac_lib_var=`echo intl'_'strerror | sed 'y%./+-%__p_%'`

xe_check_libs=" -lintl "
cat > conftest.$ac_ext <<EOF
#line 5789 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char strerror();

int main() {
strerror()
; return 0; }
EOF
if { (eval echo configure:5800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo intl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lintl $LIBS"

else
  echo "$ac_t""no" 1>&6
fi



  echo "checking for Mule input methods" 1>&6
echo "configure:5833: checking for Mule input methods" >&5
    case "$with_xim" in "" | "yes" )
    echo "checking for XIM" 1>&6
echo "configure:5836: checking for XIM" >&5
    
echo $ac_n "checking for XmImMbLookupString in -lXm""... $ac_c" 1>&6
echo "configure:5839: checking for XmImMbLookupString in -lXm" >&5
ac_lib_var=`echo Xm'_'XmImMbLookupString | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 5844 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmImMbLookupString();

int main() {
XmImMbLookupString()
; return 0; }
EOF
if { (eval echo configure:5855: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_xim=motif
else
  echo "$ac_t""no" 1>&6
with_xim=xlib
fi


  esac
  if test "$with_xim" != "no" ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XIM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XIM 1
EOF
}

    if test "$with_xim" = "xlib"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XIM_XLIB
EOF
cat >> confdefs.h <<\EOF
#define XIM_XLIB 1
EOF
}

      extra_objs="$extra_objs input-method-xlib.o"
  fi
    if test "$with_xim" = "motif"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XIM_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define XIM_MOTIF 1
EOF
}

      need_motif=yes
      extra_objs="$extra_objs input-method-motif.o"
  fi
    fi

    test "$with_wnn6" = "yes" && with_wnn=yes # wnn6 implies wnn support
  test -z "$with_wnn" && { ac_safe=`echo "wnn/wnnerror.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for wnn/wnnerror.h""... $ac_c" 1>&6
echo "configure:5914: checking for wnn/wnnerror.h" >&5

cat > conftest.$ac_ext <<EOF
#line 5917 "configure"
#include "confdefs.h"
#include <wnn/wnnerror.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5922: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi
 }
  test -z "$with_wnn" && { 
echo $ac_n "checking for jl_dic_list in -lwnn""... $ac_c" 1>&6
echo "configure:5945: checking for jl_dic_list in -lwnn" >&5
ac_lib_var=`echo wnn'_'jl_dic_list | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn "
cat > conftest.$ac_ext <<EOF
#line 5950 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list();

int main() {
jl_dic_list()
; return 0; }
EOF
if { (eval echo configure:5961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi

 }
  test -z "$with_wnn" && with_wnn=yes
  if test "$with_wnn" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_WNN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WNN 1
EOF
}

    libs_x="-lwnn $libs_x"
    extra_objs="$extra_objs mule-wnnfns.o"
    
echo $ac_n "checking for jl_fi_dic_list in -lwnn""... $ac_c" 1>&6
echo "configure:5996: checking for jl_fi_dic_list in -lwnn" >&5
ac_lib_var=`echo wnn'_'jl_fi_dic_list | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn "
cat > conftest.$ac_ext <<EOF
#line 6001 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_fi_dic_list();

int main() {
jl_fi_dic_list()
; return 0; }
EOF
if { (eval echo configure:6012: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_wnn6=yes
else
  echo "$ac_t""no" 1>&6
fi


    test "$with_wnn6" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_WNN6
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WNN6 1
EOF
}

    fi

    test -z "$with_canna" && { ac_safe=`echo "canna/RK.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/RK.h""... $ac_c" 1>&6
echo "configure:6044: checking for canna/RK.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6047 "configure"
#include "confdefs.h"
#include <canna/RK.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6052: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi
 }
  test -z "$with_canna" && { 
echo $ac_n "checking for RkBgnBun in -lRKC""... $ac_c" 1>&6
echo "configure:6075: checking for RkBgnBun in -lRKC" >&5
ac_lib_var=`echo RKC'_'RkBgnBun | sed 'y%./+-%__p_%'`

xe_check_libs=" -lRKC "
cat > conftest.$ac_ext <<EOF
#line 6080 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char RkBgnBun();

int main() {
RkBgnBun()
; return 0; }
EOF
if { (eval echo configure:6091: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi

 }
  test -z "$with_canna" && { 
echo $ac_n "checking for jrKanjiControl in -lcanna""... $ac_c" 1>&6
echo "configure:6114: checking for jrKanjiControl in -lcanna" >&5
ac_lib_var=`echo canna'_'jrKanjiControl | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcanna "
cat > conftest.$ac_ext <<EOF
#line 6119 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jrKanjiControl();

int main() {
jrKanjiControl()
; return 0; }
EOF
if { (eval echo configure:6130: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi

 }
  test -z "$with_canna" && with_canna=yes
  if test "$with_canna" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CANNA
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CANNA 1
EOF
}

    libs_x="-lcanna -lRKC $libs_x"
    extra_objs="$extra_objs mule-canna.o"
    fi
else # "$with_mule" = "no"
  for feature in xim canna wnn; do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
      echo "configure: warning: "--with-${feature} ignored:  Not valid without Mule support"" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi


test "$need_motif" = "yes" && libs_x="-lXm $libs_x"

for ac_func in acosh asinh atanh cbrt closedir dup2 eaccess fmod fpathconf frexp ftime gethostname getpagesize gettimeofday getcwd getwd logb lrand48 matherr mkdir mktime perror poll random realpath rename res_init rint rmdir select setitimer setpgid setlocale setsid sigblock sighold sigprocmask strcasecmp strerror tzset utimes waitpid
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6179: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 6182 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6205: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


test "$ac_cv_func_realpath" = "yes" && extra_objs="$extra_objs realpath.o"

echo $ac_n "checking whether netdb declares h_errno""... $ac_c" 1>&6
echo "configure:6236: checking whether netdb declares h_errno" >&5
cat > conftest.$ac_ext <<EOF
#line 6238 "configure"
#include "confdefs.h"
#include <netdb.h>
int main() {
return h_errno;
; return 0; }
EOF
if { (eval echo configure:6245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_H_ERRNO
EOF
cat >> confdefs.h <<\EOF
#define HAVE_H_ERRNO 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking for sigsetjmp""... $ac_c" 1>&6
echo "configure:6265: checking for sigsetjmp" >&5
cat > conftest.$ac_ext <<EOF
#line 6267 "configure"
#include "confdefs.h"
#include <setjmp.h>
int main() {
sigjmp_buf bar; sigsetjmp (bar, 0);
; return 0; }
EOF
if { (eval echo configure:6274: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SIGSETJMP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIGSETJMP 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking whether localtime caches TZ""... $ac_c" 1>&6
echo "configure:6294: checking whether localtime caches TZ" >&5

if test "$ac_cv_func_tzset" = "yes"; then
cat > conftest.$ac_ext <<EOF
#line 6298 "configure"
#include "confdefs.h"
#include <time.h>
#if STDC_HEADERS
# include <stdlib.h>
#endif
extern char **environ;
unset_TZ ()
{
  char **from, **to;
  for (to = from = environ; (*to = *from); from++)
    if (! (to[0][0] == 'T' && to[0][1] == 'Z' && to[0][2] == '='))
      to++;
}
char TZ_GMT0[] = "TZ=GMT0";
char TZ_PST8[] = "TZ=PST8";
main()
{
  time_t now = time ((time_t *) 0);
  int hour_GMT0, hour_unset;
  if (putenv (TZ_GMT0) != 0)
    exit (1);
  hour_GMT0 = localtime (&now)->tm_hour;
  unset_TZ ();
  hour_unset = localtime (&now)->tm_hour;
  if (putenv (TZ_PST8) != 0)
    exit (1);
  if (localtime (&now)->tm_hour == hour_GMT0)
    exit (1);
  unset_TZ ();
  if (localtime (&now)->tm_hour != hour_unset)
    exit (1);
  exit (0);
}
EOF
if { (eval echo configure:6333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  emacs_cv_localtime_cache=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  emacs_cv_localtime_cache=yes
fi
rm -fr conftest*
else
	# If we lack tzset, report that localtime does not cache TZ,
	# since we can't invalidate the cache if we don't have tzset.
	emacs_cv_localtime_cache=no
fi
echo "$ac_t""$emacs_cv_localtime_cache" 1>&6
if test $emacs_cv_localtime_cache = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LOCALTIME_CACHE
EOF
cat >> confdefs.h <<\EOF
#define LOCALTIME_CACHE 1
EOF
}

fi

if test "$HAVE_TIMEVAL" = "yes"; then
echo $ac_n "checking whether gettimeofday cannot accept two arguments""... $ac_c" 1>&6
echo "configure:6362: checking whether gettimeofday cannot accept two arguments" >&5
cat > conftest.$ac_ext <<EOF
#line 6364 "configure"
#include "confdefs.h"

#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
  
int main() {

  struct timeval time;
  struct timezone dummy;
  gettimeofday (&time, &dummy);

; return 0; }
EOF
if { (eval echo configure:6386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GETTIMEOFDAY_ONE_ARGUMENT
EOF
cat >> confdefs.h <<\EOF
#define GETTIMEOFDAY_ONE_ARGUMENT 1
EOF
}

fi
rm -f conftest*
fi


echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:6408: checking for inline" >&5

ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 6413 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:6420: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done


echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining inline = 
EOF
cat >> confdefs.h <<\EOF
#define inline 
EOF
}
 ;;
  *)  { test "$extra_verbose" = "yes" && cat << EOF
    Defining inline = $ac_cv_c_inline
EOF
cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
}
 ;;
esac

test "$ac_cv_c_inline" != "no" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_INLINE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_INLINE 1
EOF
}



# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:6465: checking for working alloca.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6468 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:6475: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ALLOCA_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF
}

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:6499: checking for alloca" >&5

cat > conftest.$ac_ext <<EOF
#line 6502 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# if HAVE_ALLOCA_H
#  include <alloca.h>
# else
#  ifdef _AIX
 #pragma alloca
#  else
#   ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:6525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ALLOCA
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF
}

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.o
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining C_ALLOCA
EOF
cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF
}


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:6564: checking whether alloca needs Cray hooks" >&5

cat > conftest.$ac_ext <<EOF
#line 6567 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6591: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 6594 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6617: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining CRAY_STACKSEG_END = $ac_func
EOF
cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF
}

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:6647: checking stack direction for C alloca" >&5

cat > conftest.$ac_ext <<EOF
#line 6650 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:6669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining STACK_DIRECTION = $ac_cv_c_stack_direction
EOF
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF
}

fi

test -n "$ALLOCA" && extra_objs="$extra_objs $ALLOCA"

echo $ac_n "checking for pid_t""... $ac_c" 1>&6
echo "configure:6694: checking for pid_t" >&5

cat > conftest.$ac_ext <<EOF
#line 6697 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_pid_t=yes
else
  rm -rf conftest*
  ac_cv_type_pid_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_pid_t" 1>&6
if test $ac_cv_type_pid_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining pid_t = int
EOF
cat >> confdefs.h <<\EOF
#define pid_t int
EOF
}

fi

ac_safe=`echo "vfork.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for vfork.h""... $ac_c" 1>&6
echo "configure:6729: checking for vfork.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6732 "configure"
#include "confdefs.h"
#include <vfork.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6737: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_VFORK_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VFORK_H 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for working vfork""... $ac_c" 1>&6
echo "configure:6765: checking for working vfork" >&5

cat > conftest.$ac_ext <<EOF
#line 6768 "configure"
#include "confdefs.h"
/* Thanks to Paul Eggert for this test.  */
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_VFORK_H
#include <vfork.h>
#endif
/* On some sparc systems, changes by the child to local and incoming
   argument registers are propagated back to the parent.
   The compiler is told about this with #include <vfork.h>,
   but some compilers (e.g. gcc -O) don't grok <vfork.h>.
   Test for this by using a static variable whose address
   is put into a register that is clobbered by the vfork.  */
static
#ifdef __cplusplus
sparc_address_test (int arg)
#else
sparc_address_test (arg) int arg;
#endif
{
  static pid_t child;
  if (!child) {
    child = vfork ();
    if (child < 0) {
      perror ("vfork");
      _exit(2);
    }
    if (!child) {
      arg = getpid();
      write(-1, "", 0);
      _exit (arg);
    }
  }
}
main() {
  pid_t parent = getpid ();
  pid_t child;

  sparc_address_test ();

  child = vfork ();

  if (child == 0) {
    /* Here is another test for sparc vfork register problems.
       This test uses lots of local variables, at least
       as many local variables as main has allocated so far
       including compiler temporaries.  4 locals are enough for
       gcc 1.40.3 on a Solaris 4.1.3 sparc, but we use 8 to be safe.
       A buggy compiler should reuse the register of parent
       for one of the local variables, since it will think that
       parent can't possibly be used any more in this routine.
       Assigning to the local variable will thus munge parent
       in the parent process.  */
    pid_t
      p = getpid(), p1 = getpid(), p2 = getpid(), p3 = getpid(),
      p4 = getpid(), p5 = getpid(), p6 = getpid(), p7 = getpid();
    /* Convince the compiler that p..p7 are live; otherwise, it might
       use the same hardware register for all 8 local variables.  */
    if (p != p1 || p != p2 || p != p3 || p != p4
	|| p != p5 || p != p6 || p != p7)
      _exit(1);

    /* On some systems (e.g. IRIX 3.3),
       vfork doesn't separate parent from child file descriptors.
       If the child closes a descriptor before it execs or exits,
       this munges the parent's descriptor as well.
       Test for this by closing stdout in the child.  */
    _exit(close(fileno(stdout)) != 0);
  } else {
    int status;
    struct stat st;

    while (wait(&status) != child)
      ;
    exit(
	 /* Was there some problem with vforking?  */
	 child < 0

	 /* Did the child fail?  (This shouldn't happen.)  */
	 || status

	 /* Did the vfork/compiler bug occur?  */
	 || parent != getpid()

	 /* Did the file descriptor bug occur?  */
	 || fstat(fileno(stdout), &st) != 0
	 );
  }
}
EOF
if { (eval echo configure:6863: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_vfork_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_vfork_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_vfork_works" 1>&6
if test $ac_cv_func_vfork_works = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining vfork = fork
EOF
cat >> confdefs.h <<\EOF
#define vfork fork
EOF
}

fi


echo $ac_n "checking for working strcoll""... $ac_c" 1>&6
echo "configure:6888: checking for working strcoll" >&5

cat > conftest.$ac_ext <<EOF
#line 6891 "configure"
#include "confdefs.h"
#include <string.h>
main ()
{
  exit (strcoll ("abc", "def") >= 0 ||
	strcoll ("ABC", "DEF") >= 0 ||
	strcoll ("123", "456") >= 0);
}
EOF
if { (eval echo configure:6901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_strcoll_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_strcoll_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_strcoll_works" 1>&6
if test $ac_cv_func_strcoll_works = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_STRCOLL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STRCOLL 1
EOF
}

fi


echo $ac_n "checking size of short""... $ac_c" 1>&6
echo "configure:6926: checking size of short" >&5

cat > conftest.$ac_ext <<EOF
#line 6929 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(short));
  exit(0);
}
EOF
if { (eval echo configure:6940: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_short=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_short=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_short" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_SHORT = $ac_cv_sizeof_short
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
EOF
}


echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:6961: checking size of int" >&5

cat > conftest.$ac_ext <<EOF
#line 6964 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:6975: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_INT = $ac_cv_sizeof_int
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF
}


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:6996: checking size of long" >&5

cat > conftest.$ac_ext <<EOF
#line 6999 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:7010: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_LONG = $ac_cv_sizeof_long
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF
}



for ac_hdr in unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:7035: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 7038 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7043: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

for ac_func in getpagesize
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:7075: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 7078 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:7101: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for working mmap""... $ac_c" 1>&6
echo "configure:7129: checking for working mmap" >&5

cat > conftest.$ac_ext <<EOF
#line 7132 "configure"
#include "confdefs.h"

/* Thanks to Mike Haertel and Jim Avera for this test.
   Here is a matrix of mmap possibilities:
	mmap private not fixed
	mmap private fixed at somewhere currently unmapped
	mmap private fixed at somewhere already mapped
	mmap shared not fixed
	mmap shared fixed at somewhere currently unmapped
	mmap shared fixed at somewhere already mapped
   For private mappings, we should verify that changes cannot be read()
   back from the file, nor mmap's back from the file at a different
   address.  (There have been systems where private was not correctly
   implemented like the infamous i386 svr4.0, and systems where the
   VM page cache was not coherent with the filesystem buffer cache
   like early versions of FreeBSD and possibly contemporary NetBSD.)
   For shared mappings, we should conversely verify that changes get
   propogated back to all the places they're supposed to be.

   Grep wants private fixed already mapped.
   The main things grep needs to know about mmap are:
   * does it exist and is it safe to write into the mmap'd area
   * how to use it (BSD variants)  */
#include <sys/types.h>
#include <fcntl.h>
#include <sys/mman.h>

/* This mess was copied from the GNU getpagesize.h.  */
#ifndef HAVE_GETPAGESIZE
# ifdef HAVE_UNISTD_H
#  include <unistd.h>
# endif

/* Assume that all systems that can run configure have sys/param.h.  */
# ifndef HAVE_SYS_PARAM_H
#  define HAVE_SYS_PARAM_H 1
# endif

# ifdef _SC_PAGESIZE
#  define getpagesize() sysconf(_SC_PAGESIZE)
# else /* no _SC_PAGESIZE */
#  ifdef HAVE_SYS_PARAM_H
#   include <sys/param.h>
#   ifdef EXEC_PAGESIZE
#    define getpagesize() EXEC_PAGESIZE
#   else /* no EXEC_PAGESIZE */
#    ifdef NBPG
#     define getpagesize() NBPG * CLSIZE
#     ifndef CLSIZE
#      define CLSIZE 1
#     endif /* no CLSIZE */
#    else /* no NBPG */
#     ifdef NBPC
#      define getpagesize() NBPC
#     else /* no NBPC */
#      ifdef PAGESIZE
#       define getpagesize() PAGESIZE
#      endif /* PAGESIZE */
#     endif /* no NBPC */
#    endif /* no NBPG */
#   endif /* no EXEC_PAGESIZE */
#  else /* no HAVE_SYS_PARAM_H */
#   define getpagesize() 8192	/* punt totally */
#  endif /* no HAVE_SYS_PARAM_H */
# endif /* no _SC_PAGESIZE */

#endif /* no HAVE_GETPAGESIZE */

#ifdef __cplusplus
extern "C" { void *malloc(unsigned); }
#else
char *malloc();
#endif

int
main()
{
	char *data, *data2, *data3;
	int i, pagesize;
	int fd;

	pagesize = getpagesize();

	/*
	 * First, make a file with some known garbage in it.
	 */
	data = malloc(pagesize);
	if (!data)
		exit(1);
	for (i = 0; i < pagesize; ++i)
		*(data + i) = rand();
	umask(0);
	fd = creat("conftestmmap", 0600);
	if (fd < 0)
		exit(1);
	if (write(fd, data, pagesize) != pagesize)
		exit(1);
	close(fd);

	/*
	 * Next, try to mmap the file at a fixed address which
	 * already has something else allocated at it.  If we can,
	 * also make sure that we see the same garbage.
	 */
	fd = open("conftestmmap", O_RDWR);
	if (fd < 0)
		exit(1);
	data2 = malloc(2 * pagesize);
	if (!data2)
		exit(1);
	data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
	if (data2 != mmap(data2, pagesize, PROT_READ | PROT_WRITE,
	    MAP_PRIVATE | MAP_FIXED, fd, 0L))
		exit(1);
	for (i = 0; i < pagesize; ++i)
		if (*(data + i) != *(data2 + i))
			exit(1);

	/*
	 * Finally, make sure that changes to the mapped area
	 * do not percolate back to the file as seen by read().
	 * (This is a bug on some variants of i386 svr4.0.)
	 */
	for (i = 0; i < pagesize; ++i)
		*(data2 + i) = *(data2 + i) + 1;
	data3 = malloc(pagesize);
	if (!data3)
		exit(1);
	if (read(fd, data3, pagesize) != pagesize)
		exit(1);
	for (i = 0; i < pagesize; ++i)
		if (*(data + i) != *(data3 + i))
			exit(1);
	close(fd);
	unlink("conftestmmap");
	exit(0);
}

EOF
if { (eval echo configure:7272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_mmap_fixed_mapped=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_mmap_fixed_mapped=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_mmap_fixed_mapped" 1>&6
if test $ac_cv_func_mmap_fixed_mapped = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MMAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MMAP 1
EOF
}

fi


test "$GNU_MALLOC" != "yes"   -a "$ac_cv_func_mmap_fixed_mapped" != "yes" && rel_alloc=no
test "$rel_alloc" = "default" -a "$ac_cv_func_mmap_fixed_mapped"  = "yes" && rel_alloc=yes
test "$rel_alloc" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REL_ALLOC
EOF
cat >> confdefs.h <<\EOF
#define REL_ALLOC 1
EOF
}


echo $ac_n "checking for socket""... $ac_c" 1>&6
echo "configure:7308: checking for socket" >&5

cat > conftest.$ac_ext <<EOF
#line 7311 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socket) || defined (__stub___socket)
choke me
#else
socket();
#endif

; return 0; }
EOF
if { (eval echo configure:7334: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_socket=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "netinet/in.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for netinet/in.h""... $ac_c" 1>&6
echo "configure:7349: checking for netinet/in.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7352 "configure"
#include "confdefs.h"
#include <netinet/in.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7357: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "arpa/inet.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for arpa/inet.h""... $ac_c" 1>&6
echo "configure:7374: checking for arpa/inet.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7377 "configure"
#include "confdefs.h"
#include <arpa/inet.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7382: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKETS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKETS 1
EOF
}

      echo $ac_n "checking "for sun_len member in struct sockaddr_un"""... $ac_c" 1>&6
echo "configure:7407: checking "for sun_len member in struct sockaddr_un"" >&5
      cat > conftest.$ac_ext <<EOF
#line 7409 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
      
int main() {
static struct sockaddr_un x; x.sun_len = 1;
; return 0; }
EOF
if { (eval echo configure:7420: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKADDR_SUN_LEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_SUN_LEN 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for msgget""... $ac_c" 1>&6
echo "configure:7451: checking for msgget" >&5

cat > conftest.$ac_ext <<EOF
#line 7454 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char msgget(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char msgget();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_msgget) || defined (__stub___msgget)
choke me
#else
msgget();
#endif

; return 0; }
EOF
if { (eval echo configure:7477: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_msgget=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_msgget=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'msgget`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "sys/ipc.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/ipc.h""... $ac_c" 1>&6
echo "configure:7492: checking for sys/ipc.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7495 "configure"
#include "confdefs.h"
#include <sys/ipc.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7500: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
echo "configure:7517: checking for sys/msg.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7520 "configure"
#include "confdefs.h"
#include <sys/msg.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7525: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SYSVIPC
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SYSVIPC 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


ac_safe=`echo "dirent.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for dirent.h""... $ac_c" 1>&6
echo "configure:7563: checking for dirent.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7566 "configure"
#include "confdefs.h"
#include <dirent.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7571: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SYSV_SYSTEM_DIR
EOF
cat >> confdefs.h <<\EOF
#define SYSV_SYSTEM_DIR 1
EOF
}

else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "sys/dir.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/dir.h""... $ac_c" 1>&6
echo "configure:7598: checking for sys/dir.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7601 "configure"
#include "confdefs.h"
#include <sys/dir.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7606: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining NONSYSTEM_DIR_LIBRARY
EOF
cat >> confdefs.h <<\EOF
#define NONSYSTEM_DIR_LIBRARY 1
EOF
}

fi

fi


ac_safe=`echo "nlist.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for nlist.h""... $ac_c" 1>&6
echo "configure:7639: checking for nlist.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7642 "configure"
#include "confdefs.h"
#include <nlist.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7647: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NLIST_STRUCT
EOF
cat >> confdefs.h <<\EOF
#define NLIST_STRUCT 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi


for f in "/usr/lpp/X11/bin/smt.exp" "/usr/bin/X11/smt.exp" ; do
  if test -r $f; then { test "$extra_verbose" = "yes" && cat << EOF
    Defining AIX_SMT_EXP = -bI:$f
EOF
cat >> confdefs.h <<EOF
#define AIX_SMT_EXP -bI:$f
EOF
}
 break; fi
done

CFLAGS="$REAL_CFLAGS"

file="$srcdir/lisp/version.el"
version=`sed -ne 's/^(defconst emacs-version "\(.*\)".*/\1/p' "$file"`
if test  -z "$version"; then
  echo "$progname: can't find current emacs version in \"$file\"." >&2
  exit 1
fi
beta=`sed -ne 's/^.*XEmacs Lucid (beta\([0-9][0-9]*\)).*$/\1/p' "$file"`
test -n "$beta"  && version="${version}-b${beta}"



echo "checking "for sound support"" 1>&6
echo "configure:7700: checking "for sound support"" >&5
case "$with_sound" in
  native | both ) with_native_sound=yes;;
  nas    | no   ) with_native_sound=no;;
esac
if test "$with_native_sound" != "no"; then
    if test -d "/usr/demo/SOUND"; then
    sound_found="yes" extra_objs="$extra_objs sunplay.o"
    if test -d "/usr/demo/SOUND/include"
      then sound_cflags="-I/usr/demo/SOUND/include"
      else sound_cflags="-I/usr/demo/SOUND"
    fi
    if test -z "$native_sound_lib" ; then
      if test -r "/usr/demo/SOUND/lib/libaudio.a"
        then native_sound_lib="/usr/demo/SOUND/lib/libaudio.a"
        else native_sound_lib="/usr/demo/SOUND/libaudio.a"
      fi
    fi
  else
    case "$canonical" in \
    *-sgi-* )
      
echo $ac_n "checking for ALopenport in -laudio""... $ac_c" 1>&6
echo "configure:7723: checking for ALopenport in -laudio" >&5
ac_lib_var=`echo audio'_'ALopenport | sed 'y%./+-%__p_%'`

xe_check_libs=" -laudio "
cat > conftest.$ac_ext <<EOF
#line 7728 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ALopenport();

int main() {
ALopenport()
; return 0; }
EOF
if { (eval echo configure:7739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  native_sound_lib="-laudio"
else
  echo "$ac_t""no" 1>&6
fi


      if test "$native_sound_lib" = "-laudio"; then
        sound_found="yes" extra_objs="$extra_objs sgiplay.o" sound_cflags=""
      fi ;;
    hppa*-hp-hpux* )
      
echo $ac_n "checking for AOpenAudio in -lAlib""... $ac_c" 1>&6
echo "configure:7765: checking for AOpenAudio in -lAlib" >&5
ac_lib_var=`echo Alib'_'AOpenAudio | sed 'y%./+-%__p_%'`

xe_check_libs=" -lAlib "
cat > conftest.$ac_ext <<EOF
#line 7770 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char AOpenAudio();

int main() {
AOpenAudio()
; return 0; }
EOF
if { (eval echo configure:7781: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  native_sound_lib="-lAlib"
else
  echo "$ac_t""no" 1>&6
fi


      if test "$native_sound_lib" = "-lAlib"; then
        sound_found="yes" extra_objs="$extra_objs hpplay.o"
        if test "$with_gcc" = "yes" # Kludge city
          then sound_cflags="-Dconst= -Dvolatile= -I/usr/audio/examples"
          else sound_cflags="+e -I/usr/audio/examples"
        fi
      fi ;;
    esac
  fi

  if test -z "$sound_found"; then
    for dir in "machine" "sys" "linux"; do
      ac_safe=`echo "${dir}/soundcard.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${dir}/soundcard.h""... $ac_c" 1>&6
echo "configure:7815: checking for ${dir}/soundcard.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7818 "configure"
#include "confdefs.h"
#include <${dir}/soundcard.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7823: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  sound_found=yes
        extra_objs="$extra_objs linuxplay.o"
        { test "$extra_verbose" = "yes" && cat << EOF
    Defining SOUNDCARD_H_PATH = "${dir}/soundcard.h"
EOF
cat >> confdefs.h <<EOF
#define SOUNDCARD_H_PATH "${dir}/soundcard.h"
EOF
}

        break
else
  echo "$ac_t""no" 1>&6
fi

    done
  fi

  test "$sound_found" = "yes" && with_native_sound=yes
fi

if test -z "$with_sound"; then
  if test "$with_native_sound" = "yes" -o -n "$native_sound_lib"; then
    with_sound=native
  fi
fi

if test "$with_native_sound" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NATIVE_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NATIVE_SOUND 1
EOF
}

  test -n "$native_sound_lib" && LIBS="$LIBS $native_sound_lib"
fi

case "$with_sound" in both | nas )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NAS_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NAS_SOUND 1
EOF
}

  extra_objs="$extra_objs nas.o"
  LIBS="$LIBS -laudio"
      cat > conftest.$ac_ext <<EOF
#line 7889 "configure"
#include "confdefs.h"
#include <audio/Xtutil.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "AuXtErrorJump" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NAS_NO_ERROR_JUMP
EOF
cat >> confdefs.h <<\EOF
#define NAS_NO_ERROR_JUMP 1
EOF
}

fi
rm -f conftest*

esac




echo "checking "how to do terminal I/O"" 1>&6
echo "configure:7915: checking "how to do terminal I/O"" >&5

test -z "$with_tty" && with_tty=yes

if test "$with_tty" = "yes"  ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TTY
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TTY 1
EOF
}


      ac_safe=`echo "termios.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for termios.h""... $ac_c" 1>&6
echo "configure:7931: checking for termios.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7934 "configure"
#include "confdefs.h"
#include <termios.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7939: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERMIOS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERMIOS 1
EOF
}

else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "termio.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for termio.h""... $ac_c" 1>&6
echo "configure:7966: checking for termio.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7969 "configure"
#include "confdefs.h"
#include <termio.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7974: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERMIO
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERMIO 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

fi


    #### Attn: Bill Perry:  Remove next line when GPM support is added
  test -z "$with_gpm" && with_gpm=no

  test -z "$with_gpm" && { ac_safe=`echo "gpm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for gpm.h""... $ac_c" 1>&6
echo "configure:8009: checking for gpm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8012 "configure"
#include "confdefs.h"
#include <gpm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8017: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_gpm=no
fi
 }
  test -z "$with_gpm" && { 
echo $ac_n "checking for connect_to_gpm in -lgpm""... $ac_c" 1>&6
echo "configure:8040: checking for connect_to_gpm in -lgpm" >&5
ac_lib_var=`echo gpm'_'connect_to_gpm | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgpm "
cat > conftest.$ac_ext <<EOF
#line 8045 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect_to_gpm();

int main() {
connect_to_gpm()
; return 0; }
EOF
if { (eval echo configure:8056: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_gpm=yes
else
  echo "$ac_t""no" 1>&6
with_gpm=no
fi

 }
  if test "$with_gpm" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GPM 1
EOF
}

    extra_objs="$extra_objs gpmevent.o"
    LIBS="$LIBS -lgpm"
  fi

    if test -z "$with_ncurses"; then
    
echo $ac_n "checking for tparm in -lncurses""... $ac_c" 1>&6
echo "configure:8093: checking for tparm in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tparm | sed 'y%./+-%__p_%'`

xe_check_libs=" -lncurses "
cat > conftest.$ac_ext <<EOF
#line 8098 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tparm();

int main() {
tparm()
; return 0; }
EOF
if { (eval echo configure:8109: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_ncurses=yes
else
  echo "$ac_t""no" 1>&6
with_ncurses=no
fi


  fi
  if test "$with_ncurses" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NCURSES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NCURSES 1
EOF
}

    ac_safe=`echo "ncurses/curses.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/curses.h""... $ac_c" 1>&6
echo "configure:8142: checking for ncurses/curses.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8145 "configure"
#include "confdefs.h"
#include <ncurses/curses.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8150: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  curses_h_path=ncurses/curses.h
else
  echo "$ac_t""no" 1>&6
fi

    ac_safe=`echo "ncurses/term.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/term.h""... $ac_c" 1>&6
echo "configure:8172: checking for ncurses/term.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8175 "configure"
#include "confdefs.h"
#include <ncurses/term.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8180: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  term_h_path=ncurses/term.h
else
  echo "$ac_t""no" 1>&6
fi

    extra_objs="$extra_objs terminfo.o"
    LIBS="$LIBS -lncurses"

    if test "$ac_cv_header_ncurses_curses_h" != "yes"  ; then
                        save_c_switch_site="$c_switch_site"
      c_switch_site="$c_switch_site -I/usr/include/ncurses"
      ac_safe=`echo "ncurses/curses.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/curses.h""... $ac_c" 1>&6
echo "configure:8208: checking for ncurses/curses.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8211 "configure"
#include "confdefs.h"
#include <ncurses/curses.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8216: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  curses_h_path=ncurses/curses.h
else
  echo "$ac_t""no" 1>&6
fi

      if test "$ac_cv_header_ncurses_curses_h" = "yes";
        then echo "configure: warning: "Your system has the bogus ncurses include bug."" 1>&2
        else c_switch_site="$save_c_switch_site"
      fi
    fi
  else         
echo $ac_n "checking for tgoto in -ltermlib""... $ac_c" 1>&6
echo "configure:8243: checking for tgoto in -ltermlib" >&5
ac_lib_var=`echo termlib'_'tgoto | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltermlib "
cat > conftest.$ac_ext <<EOF
#line 8248 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgoto();

int main() {
tgoto()
; return 0; }
EOF
if { (eval echo configure:8259: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_libtermlib=yes
else
  echo "$ac_t""no" 1>&6
have_libtermlib=no
fi


    
echo $ac_n "checking for tgoto in -ltermcap""... $ac_c" 1>&6
echo "configure:8282: checking for tgoto in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgoto | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltermcap "
cat > conftest.$ac_ext <<EOF
#line 8287 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgoto();

int main() {
tgoto()
; return 0; }
EOF
if { (eval echo configure:8298: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_libtermcap=yes
else
  echo "$ac_t""no" 1>&6
have_libtermcap=no
fi


    
echo $ac_n "checking for tparm in -lcurses""... $ac_c" 1>&6
echo "configure:8321: checking for tparm in -lcurses" >&5
ac_lib_var=`echo curses'_'tparm | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcurses "
cat > conftest.$ac_ext <<EOF
#line 8326 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tparm();

int main() {
tparm()
; return 0; }
EOF
if { (eval echo configure:8337: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_libcurses=yes
else
  echo "$ac_t""no" 1>&6
have_libcurses=no
fi



    if test "$have_terminfo" = "yes"; then
      extra_objs="$extra_objs terminfo.o"
      if   test -n "$libs_termcap";         then LIBS="$LIBS $libs_termcap"
      elif test "$have_libcurses"  = "yes"; then LIBS="$LIBS -lcurses"
      elif test "$have_libtermlib" = "yes"; then LIBS="$LIBS -ltermlib"
      elif test "$have_libtermcap" = "yes"; then LIBS="$LIBS -ltermcap"
    fi
    else       extra_objs="$extra_objs tparam.o"
      if   test -n "$libs_termcap";         then LIBS="$LIBS $libs_termcap"
      elif test "$have_libtermcap" = "yes"; then LIBS="$LIBS -ltermcap"
      elif test "$have_libcurses"  = "yes"; then LIBS="$LIBS -lcurses"
      else extra_objs="$extra_objs termcap.o"
      fi
    fi
  fi
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining CURSES_H_PATH = "${curses_h_path-curses.h}"
EOF
cat >> confdefs.h <<EOF
#define CURSES_H_PATH "${curses_h_path-curses.h}"
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining TERM_H_PATH = "${term_h_path-term.h}"
EOF
cat >> confdefs.h <<EOF
#define TERM_H_PATH "${term_h_path-term.h}"
EOF
}

else # "$with_tty" = "no"
  for feature in ncurses gpm; do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
      echo "configure: warning: "--with-${feature} ignored:  Not valid without TTY support"" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi


echo "checking for database support" 1>&6
echo "configure:8401: checking for database support" >&5

if test "$with_database_gnudbm" != "no"  ; then
  
echo $ac_n "checking for dbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:8406: checking for dbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'dbm_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgdbm "
cat > conftest.$ac_ext <<EOF
#line 8411 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:8422: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_gnudbm=yes have_libgdbm=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$with_database_gnudbm" != "yes"; then
    echo $ac_n "checking for dbm_open""... $ac_c" 1>&6
echo "configure:8444: checking for dbm_open" >&5

cat > conftest.$ac_ext <<EOF
#line 8447 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dbm_open(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dbm_open) || defined (__stub___dbm_open)
choke me
#else
dbm_open();
#endif

; return 0; }
EOF
if { (eval echo configure:8470: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'dbm_open`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_gnudbm=yes
else
  echo "$ac_t""no" 1>&6
fi

      fi
  if test "$with_database_gnudbm" = "yes" ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DBM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DBM 1
EOF
}

    test "$have_libgdbm" = "yes" && LIBS="$LIBS -lgdbm"
    with_database_dbm=no
  else with_database_gnudbm=no
  fi
fi

if test "$with_database_dbm" != "no"  ; then
  echo $ac_n "checking for dbm_open""... $ac_c" 1>&6
echo "configure:8506: checking for dbm_open" >&5

cat > conftest.$ac_ext <<EOF
#line 8509 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dbm_open(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dbm_open) || defined (__stub___dbm_open)
choke me
#else
dbm_open();
#endif

; return 0; }
EOF
if { (eval echo configure:8532: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'dbm_open`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_dbm=yes need_libdbm=no
else
  echo "$ac_t""no" 1>&6
fi

  if test "$need_libdbm" != "no"; then
    
echo $ac_n "checking for dbm_open in -ldbm""... $ac_c" 1>&6
echo "configure:8553: checking for dbm_open in -ldbm" >&5
ac_lib_var=`echo dbm'_'dbm_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldbm "
cat > conftest.$ac_ext <<EOF
#line 8558 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:8569: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_dbm=yes need_libdbm=yes
else
  echo "$ac_t""no" 1>&6
fi


  fi
  if test "$with_database_dbm" = "yes"  ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DBM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DBM 1
EOF
}

    test "$need_libdbm" = "yes" && LIBS="$LIBS -ldbm"
  else with_database_dbm=no
  fi
fi

if test "$with_database_berkdb" != "no"; then
  echo $ac_n "checking for dbopen""... $ac_c" 1>&6
echo "configure:8606: checking for dbopen" >&5

cat > conftest.$ac_ext <<EOF
#line 8609 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dbopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dbopen) || defined (__stub___dbopen)
choke me
#else
dbopen();
#endif

; return 0; }
EOF
if { (eval echo configure:8632: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_func_dbopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dbopen=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'dbopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_berkdb=yes need_libdb=no
else
  echo "$ac_t""no" 1>&6
fi

  if test "$need_libdb" != "no"; then
    
echo $ac_n "checking for dbopen in -ldb""... $ac_c" 1>&6
echo "configure:8653: checking for dbopen in -ldb" >&5
ac_lib_var=`echo db'_'dbopen | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldb "
cat > conftest.$ac_ext <<EOF
#line 8658 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbopen();

int main() {
dbopen()
; return 0; }
EOF
if { (eval echo configure:8669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_berkdb=yes need_libdb=yes
else
  echo "$ac_t""no" 1>&6
fi


    fi
  if test "$with_database_berkdb" = "yes"; then
    for path in "db/db.h" "db.h"; do
cat > conftest.$ac_ext <<EOF
#line 8693 "configure"
#include "confdefs.h"
#ifdef HAVE_INTTYPES_H
#define __BIT_TYPES_DEFINED__
#include <inttypes.h>
typedef uint8_t  u_int8_t;
typedef uint16_t u_int16_t;
typedef uint32_t u_int32_t;
#ifdef WE_DONT_NEED_QUADS
typedef uint64_t u_int64_t;
#endif
#endif
#include <$path>

int main() {

; return 0; }
EOF
if { (eval echo configure:8711: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  db_h_path="$path"; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
    done
    test -z "$db_h_path" && with_database_berkdb=no
  fi
  if test "$with_database_berkdb" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << EOF
    Defining DB_H_PATH = "$db_h_path"
EOF
cat >> confdefs.h <<EOF
#define DB_H_PATH "$db_h_path"
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_BERKELEY_DB
EOF
cat >> confdefs.h <<\EOF
#define HAVE_BERKELEY_DB 1
EOF
}

    test "$need_libdb" = "yes" && LIBS="$LIBS -ldb"
  else with_database_berkdb=no
  fi
fi

if test "$with_database_gnudbm" = "yes" -o \
        "$with_database_dbm"    = "yes" -o \
        "$with_database_berkdb" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DATABASE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DATABASE 1
EOF
}

  extra_objs="$extra_objs database.o"
fi

if test "$with_socks" = "yes"; then
  
echo $ac_n "checking for SOCKSinit in -lsocks""... $ac_c" 1>&6
echo "configure:8761: checking for SOCKSinit in -lsocks" >&5
ac_lib_var=`echo socks'_'SOCKSinit | sed 'y%./+-%__p_%'`

xe_check_libs=" -lsocks "
cat > conftest.$ac_ext <<EOF
#line 8766 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SOCKSinit();

int main() {
SOCKSinit()
; return 0; }
EOF
if { (eval echo configure:8777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socks | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lsocks $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


  test -n "$ac_cv_lib_socks_SOCKSinit" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKS 1
EOF
}

fi

if test "$usage_tracking" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USAGE_TRACKING
EOF
cat >> confdefs.h <<\EOF
#define USAGE_TRACKING 1
EOF
}

  LIBS="$LIBS -Bstatic -lut -Bdynamic"
fi


if   test "$dynamic" = "no"; then add_runtime_path=no
elif test -n "$LD_RUN_PATH"; then add_runtime_path=yes
else case "$canonical" in
       *-solaris2.* | *-sgi-irix* ) add_runtime_path=yes ;;
       * ) add_runtime_path=no ;;
     esac
fi

if test "$add_runtime_path" = "yes"; then
      echo $ac_n "checking "for runtime libraries flag"""... $ac_c" 1>&6
echo "configure:8841: checking "for runtime libraries flag"" >&5
  dash_r=""
  for try_dash_r in "-R" "-R " "-rpath "; do
    xe_check_libs="${try_dash_r}/no/such/file-or-directory"
    cat > conftest.$ac_ext <<EOF
#line 8846 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:8853: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  rm -rf conftest*
  dash_r="$try_dash_r"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
    xe_check_libs=""
    test -n "$dash_r" && break
  done
  if test -n "$dash_r";
    then echo "$ac_t"""\"${dash_r}\""" 1>&6
    else echo "$ac_t""NONE" 1>&6
  fi
fi

if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site="`echo $ld_switch_site     | sed \"s/${dash_r}[^ ]*//\"`"
  ld_switch_x_site="`echo $ld_switch_x_site | sed \"s/${dash_r}[^ ]*//\"`"
  
        if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  else
        runpath=""
    for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L* )
	dir=`echo $arg | sed 's/^-L//'`
	if test -n "`ls ${dir}/*.so 2>/dev/null`"; then
	  test -n "$runpath" && runpath="${runpath}:"
	  runpath="${runpath}${dir}"
        fi
	;;
      esac
    done
        case "$canonical" in  *-solaris2.* )
      test "$have_motif" = "yes" && runpath="${runpath}:/opt/SUNWdt/lib" ;;
    esac
  fi

  if test -n "$runpath"; then
    ld_switch_site="$ld_switch_site ${dash_r}${runpath}"
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi

c_switch_general="-DHAVE_CONFIG_H $c_switch_site $c_switch_machine $c_switch_system"
c_switch_window_system="$c_switch_x_site $X_CFLAGS"
c_switch_all="$c_switch_general $c_switch_window_system"
ld_switch_general="$ld_switch_site $ld_switch_machine $ld_switch_system"
ld_switch_window_system="$ld_switch_x_site"
ld_switch_all="$ld_switch_general $ld_switch_window_system"
ld_libs_general="$LIBS $libs_machine $libs_system $libs_standard"
ld_libs_window_system="$X_PRE_LIBS $libs_x $X_EXTRA_LIBS"
ld_libs_all="$ld_libs_window_system $ld_libs_general"

internal_makefile_list="Makefile"
SUBDIR_MAKEFILES=''
for dir in $MAKE_SUBDIR; do
  SUBDIR_MAKEFILES="$SUBDIR_MAKEFILES $dir/Makefile"
  internal_makefile_list="$internal_makefile_list $dir/Makefile.in"
done



if test "$extra_verbose" = "yes"; then
  echo "" 
  echo "extra_objs = $extra_objs"
echo "c_switch_general = $c_switch_general"
echo "c_switch_window_system = $c_switch_window_system"
echo "c_switch_all = $c_switch_all"
echo "ld_switch_general = $ld_switch_general"
echo "ld_switch_window_system = $ld_switch_window_system"
echo "ld_switch_all = $ld_switch_all"
echo "ld_libs_general = $ld_libs_general"
echo "ld_libs_window_system = $ld_libs_window_system"
echo "ld_libs_all = $ld_libs_all"
  echo ""
fi


















































{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_VERSION = $version
EOF
cat >> confdefs.h <<EOF
#define EMACS_VERSION $version
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_CONFIGURATION = "$canonical"
EOF
cat >> confdefs.h <<EOF
#define EMACS_CONFIGURATION "$canonical"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining config_machfile = "$machfile"
EOF
cat >> confdefs.h <<EOF
#define config_machfile "$machfile"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining config_opsysfile = "$opsysfile"
EOF
cat >> confdefs.h <<EOF
#define config_opsysfile "$opsysfile"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining UNEXEC_SRC = $UNEXEC_SRC
EOF
cat >> confdefs.h <<EOF
#define UNEXEC_SRC $UNEXEC_SRC
EOF
}



null_string=""
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_X_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_X_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_X_SITE_AUX = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_X_SITE_AUX $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining C_SWITCH_X_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define C_SWITCH_X_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining C_SWITCH_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define C_SWITCH_SITE $null_string
EOF
}



test -n "$puresize" && { test "$extra_verbose" = "yes" && cat << EOF
    Defining RAW_PURESIZE = $puresize
EOF
cat >> confdefs.h <<EOF
#define RAW_PURESIZE $puresize
EOF
}


if   test "$GNU_MALLOC"        = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GNU_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define GNU_MALLOC 1
EOF
}

elif test "$use_system_malloc" = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_SYSTEM_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_SYSTEM_MALLOC 1
EOF
}

fi
test "$with_motif"         = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_MOTIF 1
EOF
}

test "$with_i18n3"         = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining I18N3
EOF
cat >> confdefs.h <<\EOF
#define I18N3 1
EOF
}

test "$with_mocklisp"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MOCKLISP_SUPPORT
EOF
cat >> confdefs.h <<\EOF
#define MOCKLISP_SUPPORT 1
EOF
}

test "$with_gcc"           = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_GCC
EOF
cat >> confdefs.h <<\EOF
#define USE_GCC 1
EOF
}

test "$with_term"          = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERM 1
EOF
}

test "$external_widget"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining EXTERNAL_WIDGET
EOF
cat >> confdefs.h <<\EOF
#define EXTERNAL_WIDGET 1
EOF
}

test "$with_gnu_make"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_GNU_MAKE
EOF
cat >> confdefs.h <<\EOF
#define USE_GNU_MAKE 1
EOF
}

test "$no_doc_file"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NO_DOC_FILE
EOF
cat >> confdefs.h <<\EOF
#define NO_DOC_FILE 1
EOF
}

test "$const_is_losing"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining CONST_IS_LOSING
EOF
cat >> confdefs.h <<\EOF
#define CONST_IS_LOSING 1
EOF
}

test "$use_assertions"     = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_ASSERTIONS
EOF
cat >> confdefs.h <<\EOF
#define USE_ASSERTIONS 1
EOF
}

test "$debug"              = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DEBUG_XEMACS
EOF
cat >> confdefs.h <<\EOF
#define DEBUG_XEMACS 1
EOF
}

test "$with_quantify"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining QUANTIFY
EOF
cat >> confdefs.h <<\EOF
#define QUANTIFY 1
EOF
}

test "$memory_usage_stats" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MEMORY_USAGE_STATS
EOF
cat >> confdefs.h <<\EOF
#define MEMORY_USAGE_STATS 1
EOF
}

test "$with_pop"           = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_USE_POP
EOF
cat >> confdefs.h <<\EOF
#define MAIL_USE_POP 1
EOF
}

test "$with_kerberos"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining KERBEROS
EOF
cat >> confdefs.h <<\EOF
#define KERBEROS 1
EOF
}

test "$with_hesiod"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HESIOD
EOF
cat >> confdefs.h <<\EOF
#define HESIOD 1
EOF
}


test "$error_check_extents"   = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_EXTENTS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_EXTENTS 1
EOF
}

test "$error_check_typecheck" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_TYPECHECK
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_TYPECHECK 1
EOF
}

test "$error_check_bufpos"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_BUFPOS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_BUFPOS 1
EOF
}

test "$error_check_gc"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_GC
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_GC 1
EOF
}

test "$error_check_malloc"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_MALLOC 1
EOF
}


test "$use_union_type" != yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NO_UNION_TYPE
EOF
cat >> confdefs.h <<\EOF
#define NO_UNION_TYPE 1
EOF
}



(
if test -f /etc/osversion; then   echo "osversion: `cat /etc/osversion`"
else
  echo "uname -a: `uname -a`"
fi
echo ""
echo "$0 $quoted_arguments"
) >> Installation

(
echo "

Configured for \`$canonical'.

  Where should the build process find the source code?    $srcdir
  What installation prefix should install use?		  $prefix
  What operating system and machine description files should XEmacs use?
        \`$opsysfile' and \`$machfile'
  What compiler should XEmacs be built with?              $CC $CFLAGS
  Should XEmacs use the GNU version of malloc?            ${GNU_MALLOC}${GNU_MALLOC_reason}
  Should XEmacs use the relocating allocator for buffers? $rel_alloc
  What window system should XEmacs use?                   ${window_system}"
if test "$with_x11" = "yes"; then
  echo "  Where do we find X Windows header files?                $x_includes"
  echo "  Where do we find X Windows libraries?                   $x_libraries"
fi
if test -n "$site_includes"; then
  echo "  Additional header files:                                $site_includes"
fi
if test -n "$site_libraries"; then
  echo "  Additional libraries:                                   $site_libraries"
fi
if test -n "$runpath"; then
  echo "  Runtime library search path:                            $runpath"
fi
test "$with_dnet"  = yes && echo "  Compiling in support for DNET."
test "$with_socks" = yes && echo "  Compiling in support for SOCKS."
test "$with_term"  = yes && echo "  Compiling in support for TERM."
test "$with_xauth" = yes && echo "  Compiling in support for XAUTH."
if test "$with_xmu" != yes -a "$with_x11" = yes; then
  echo "  No Xmu; substituting equivalent routines."
fi

test "$with_gif"   = yes && echo "  Compiling in support for GIF image conversion."
test "$with_xpm"   = yes && echo "  Compiling in support for XPM images."
test "$with_xface" = yes && echo "  Compiling in support for X-Face message headers."
test "$with_jpeg"  = yes && echo "  Compiling in support for JPEG image conversion."
test "$with_png"   = yes && echo "  Compiling in support for PNG image conversion."
test "$with_tiff"  = yes && echo "  Compiling in support for TIFF image conversion (not implemented)."

case "$with_sound" in
  nas    ) echo "  Compiling in network sound (NAS) support." ;;
  native ) echo "  Compiling in native sound support." ;;
  both   ) echo "  Compiling in both network and native sound support." ;;
esac
test "$old_nas" = yes && echo "        nas library lacks error trapping, will play synchronously"

test "$with_database_berkdb" = yes && echo "  Compiling in support for Berkeley DB."
test "$with_database_dbm"    = yes && echo "  Compiling in support for DBM."
test "$with_database_gnudbm" = yes && echo "  Compiling in support for GNU DBM."

test "$with_ncurses"  = yes && echo "  Compiling in support for ncurses."
test "$with_gpm"      = yes && echo "  Compiling in support for GPM (General Purpose Mouse)."

test "$with_mule"     = yes && echo "  Compiling in Mule (multi-lingual) support."
test "$with_xim"      != no && echo "  Compiling in XIM (X11R5+ I18N input method) support."
test "$with_xim" = motif    && echo "    Using Motif to provide XIM support."
test "$with_xim" = xlib     && echo "    Using raw Xlib to provide XIM support."
test "$with_canna"    = yes && echo "  Compiling in support for Canna on Mule."
if test "$with_wnn" = yes; then
  echo "  Compiling in support for the WNN input method on Mule."
  test "$with_wnn6" = yes && echo "    WNN support for version 6."
fi
test "$with_i18n3"    = yes && echo "  Compiling in I18N support, level 3 (doesn't currently work)."

test "$with_cde"      = yes && echo "  Compiling in support for CDE."
test "$with_tooltalk" = yes && echo "  Compiling in support for ToolTalk."
test "$with_offix"    = yes && echo "  Compiling in support for OffiX."
test "$with_mocklisp" = yes && echo "  Compiling in support for Mocklisp."
test "$with_workshop" = yes && echo "  Compiling in support for Sun WorkShop."
test "$with_energize" = yes && echo "  Compiling in support for Lucid Energize (doesn't currently work)."
case  "$with_menubars" in
  lucid ) echo "  Using the Lucid menubar." ;;
  motif ) echo "  Using the Motif menubar."
          echo "  *WARNING*  The Motif menubar is currently buggy."
          echo "             We recommend using the Lucid menubar instead."
          echo "             Re-run configure with --with-menubars='lucid'." ;;
esac
case "$with_scrollbars" in
  lucid    ) echo "  Using the Lucid scrollbar."     ;;
  motif    ) echo "  Using the Motif scrollbar."     ;;
  athena   ) echo "  Using the Athena scrollbar."    ;;
  athena3d ) echo "  Using the Athena-3d scrollbar." ;;
esac
case "$with_dialogs" in
  motif    ) echo "  Using the Motif dialog boxes."     ;;
  athena   ) echo "  Using the Athena dialog boxes."    ;;
  athena3d ) echo "  Using the Athena-3d dialog boxes." ;;
esac
test "$with_pop"	= yes && echo "  Using POP for mail access"
test "$with_kerberos"	= yes && echo "  Using Kerberos for POP authentication"
test "$with_hesiod"	= yes && echo "  Using Hesiod to get POP server host"

test "$use_union_type"     = yes && echo "  Using the union type for Lisp_Objects."
test "$debug"              = yes && echo "  Compiling in extra code for debugging."
test "$memory_usage_stats" = yes && echo "  Compiling in code for checking XEmacs memory usage."
test "$usage_tracking"     = yes && echo "  Compiling with usage tracking active (Sun internal)."
echo ""
) | tee -a Installation
echo 'The above configure report is appended to "Installation" file.'
echo ""



# Remove any trailing slashes in these variables.
test -n "$prefix" &&
  prefix=`echo "$prefix" | sed 's,\([^/]\)/*$,\1,'`
test -n "$exec_prefix" &&
  exec_prefix=`echo "$exec_prefix" | sed 's,\([^/]\)/*$,\1,'`


trap '' 1 2 15

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.12"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir
ac_given_INSTALL="$INSTALL"

trap 'rm -fr `echo "$internal_makefile_list src/config.h lwlib/config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@LN_S@%$LN_S%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@RANLIB@%$RANLIB%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@YACC@%$YACC%g
s%@SET_MAKE@%$SET_MAKE%g
s%@X_CFLAGS@%$X_CFLAGS%g
s%@X_PRE_LIBS@%$X_PRE_LIBS%g
s%@X_LIBS@%$X_LIBS%g
s%@X_EXTRA_LIBS@%$X_EXTRA_LIBS%g
s%@ALLOCA@%$ALLOCA%g
s%@MAKE_SUBDIR@%$MAKE_SUBDIR%g
s%@SUBDIR_MAKEFILES@%$SUBDIR_MAKEFILES%g
s%@version@%$version%g
s%@configuration@%$configuration%g
s%@canonical@%$canonical%g
s%@srcdir@%$srcdir%g
s%@statedir@%$statedir%g
s%@infodir_user_defined@%$infodir_user_defined%g
s%@lispdir@%$lispdir%g
s%@lispdir_user_defined@%$lispdir_user_defined%g
s%@sitelispdir@%$sitelispdir%g
s%@etcdir@%$etcdir%g
s%@etcdir_user_defined@%$etcdir_user_defined%g
s%@lockdir@%$lockdir%g
s%@lockdir_user_defined@%$lockdir_user_defined%g
s%@archlibdir@%$archlibdir%g
s%@archlibdir_user_defined@%$archlibdir_user_defined%g
s%@docdir@%$docdir%g
s%@bitmapdir@%$bitmapdir%g
s%@extra_objs@%$extra_objs%g
s%@machfile@%$machfile%g
s%@opsysfile@%$opsysfile%g
s%@c_switch_general@%$c_switch_general%g
s%@c_switch_window_system@%$c_switch_window_system%g
s%@c_switch_all@%$c_switch_all%g
s%@ld_switch_general@%$ld_switch_general%g
s%@ld_switch_window_system@%$ld_switch_window_system%g
s%@ld_switch_all@%$ld_switch_all%g
s%@ld_libs_general@%$ld_libs_general%g
s%@ld_libs_window_system@%$ld_libs_window_system%g
s%@ld_libs_all@%$ld_libs_all%g
s%@libsrc_libs@%$libsrc_libs%g
s%@native_sound_lib@%$native_sound_lib%g
s%@sound_cflags@%$sound_cflags%g
s%@dynodump_arch@%$dynodump_arch%g
s%@internal_makefile_list@%$internal_makefile_list%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$internal_makefile_list"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  case "$ac_given_INSTALL" in
  [/$]*) INSTALL="$ac_given_INSTALL" ;;
  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
  esac

  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
s%@INSTALL@%$INSTALL%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="src/config.h lwlib/config.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF
CPP="$CPP"
 CPPFLAGS="$CPPFLAGS"
 top_srcdir="$srcdir"
 MAKE_SUBDIR="$MAKE_SUBDIR"

EOF
cat >> $CONFIG_STATUS <<\EOF

for dir in $MAKE_SUBDIR; do
  echo creating $dir/Makefile
  ( set -e
    cd $dir
    rm -f junk.c
    sed -e 's/^# Generated.*//' -e 's%/\*\*/#.*%%' < Makefile.in > junk.c;
    $CPP -I. -I${top_srcdir}/src $CPPFLAGS junk.c > junk.cpp;
    < junk.cpp				\
      sed -e 's/^#.*//'			\
	-e 's/^[ \f\t][ \f\t]*$//'	\
	-e 's/^ /	/'		\
	| sed -n -e '/^..*$/p'		\
	> Makefile.new
    chmod 444 Makefile.new
    mv -f Makefile.new Makefile
    rm -f junk.c junk.cpp
  )
  test "$?" != 0 && exit "$?" # For debugging
done

exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1


if test ! -f src/gdbinit && test -f $topsrcdir/src/gdbinit; then
  echo "creating src/gdbinit"
  echo "source $topsrcdir/src/gdbinit" > src/gdbinit
fi

if test "$sunpro_c" = "yes"; then   cat < EOF > .sbinit
# For use with Sun WorkShop's Source browser.
# See sbquery(1) and sbinit(4) for more information
import src
import lwlib
import lib-src
import dynodump
EOF
fi
