	     Building and Installing XEmacs on Windows NT

			     David Hobley
			    Marc Paquette
			   Jonathan Harris

Currently XEmacs for Win32 is in an early stage of development. 

The port was made much easier by the groundbreaking work of Geoff Voelker
and others who worked on the GNU Emacs port to NT. Their version is available
from http://www.cs.washington.edu/homes/voelker/ntemacs.html

To get it working you will need:

1.  You will need Visual C++ V4.2 or later to compile everything. Personally we
    have tested V4.2 and V5.0.
    Note that Visual C++ assumes a couple of environment variables INCLUDE and
    LIB to be set which specify the location of the includes and libraries.
    At this point you can select X or Win32 native support.
2.  Grab the latest XEmacs beta from ftp.xemacs.org if necessary. All Win32
    support is in the nt/ subdirectory. You'll also need the xemacs-base
    package from the binary-packages subdirectory and you'll probably alsi
    want at least the edit-utils, text-utils, cc-mode and prog-utils packages.
    Unpack the packages into, say, c:\src\xemacs\packages.

If you want to build for native GUI:

1.  If you want XPM and toolbar support grab the latest version of the xpm
    sources (xpm-3.4k.tar.gz at time of writing) and unpack it.
    Copy nt/xpm.mak from the xemacs distribution to the lib subdirectory of
    the xpm distribution, cd to that directory and build xpm with
   `nmake -f xpm.mak`.
2.  cd to the nt subdirectory of the xemacs distribution and build xemacs:
    `nmake -f xemacs.mak HAVE_MSW=1 PATH_PACKAGEPATH="c:/src/xemacs/packages"`,
    replacing "c:/src/xemacs/packages" with the location of your packages. Note
    the double quotes and *forward* slashes in that path.
    If you're building with XPM support, add this to the nmake command line:
    `HAVE_XPM=1 XPM_DIR=x:\location\of\your\xpm\source\tree`.
    Nmake will build temacs, the DOC file, update the elc's and dump xemacs.
3.  The build process creates debugging and "Source Browser" information for
    use with MS DevStudio. To use this create a new "console" project and
    under Project/Settings set:
	Debug: executable name = full path of src\xemacs.exe
	Link: output file name = full path of src\temacs.exe
	Browse Info: browse info file name = full path of src\temacs.bsc
    Remember to close the Source Browser file in DevStudio before rebuilding.

If you want support for X you will need:

1.  An X server. MI/X is available on the Internet for free; It is 
    available from:  http://www.microimages.com/www/html/freestuf/mixdlfrm.htm
2.  The MIT X11R6.3 libraries available from: ftp.x.org
3.  You'll need to compile the MIT libraries without multi-thread support.
    To do this, there is an example Win32.cf and site.def provided which
    set the relevant flags. You will also need to apply the patch in 
    nt/X11.patch in the xc/lib/X11 directory which will fix the DLL definition
    file. Once compiled and installed, you will need to apply the following
    patch to Xmd.h. This is messy and better solutions would be appreciated. 
4.  Goto 2 under 'native GUI' above and also supply:
    `HAVE_X=1 X11_DIR=x:\root\directory\of\your\X11\installation'
    to the nmake command line.

--- Xmd.h~	Thu Jun 08 23:20:40 1995
+++ Xmd.h	Sun Mar 16 13:09:10 1997
@@ -150,8 +150,9 @@
 typedef CARD16		BITS16;
 typedef CARD8		BYTE;
 
+#ifndef WIN32
 typedef CARD8           BOOL;
-
+#endif
 
Known Problems:
Please look at the TODO list for the current list of problems and people 
working on them.

Any other problems you need clarified, please email us and we will endeavour
to provide any assistance we can:

The XEmacs NT Mailing List: xemacs-nt@xemacs.org
Subscribe address:          xemacs-nt-request@xemacs.org

David Hobley
Marc Paquette
August Hill
Jonathan Harris

and others.
